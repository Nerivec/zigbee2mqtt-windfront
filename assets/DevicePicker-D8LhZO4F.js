import{r as a,b as _,j as o}from"./index-BFQ_Rrcw.js";import{S as j}from"./SelectField-CyWoaAVb.js";const S=a.memo(({devices:d,value:r,label:p,onChange:c,groups:i=[],...f})=>{const{t:l}=_("common"),[u,m]=a.useState("");a.useEffect(()=>{if(typeof r=="string"){const e=d.find(s=>s.ieee_address===r);m(e?.friendly_name??"")}else{const e=i.find(s=>r===s.id);m(e?.friendly_name??"")}},[r,d,i]);const h=e=>{const{value:s}=e.target;if(s.startsWith("0x"))c(d.find(t=>t.ieee_address===s));else{const t=Number.parseInt(s,10);c(i.find(n=>t===n.id))}},x=a.useMemo(()=>{const e=[],s=d.map(t=>o.jsxs("option",{title:t.definition?.description,value:t.ieee_address,children:[t.friendly_name," ",t.definition?.model?`(${t.definition?.model})`:""]},t.ieee_address));if(i?.length){const t=i.map(n=>o.jsx("option",{value:n.id,children:n.friendly_name},n.id));e.push(o.jsx("optgroup",{label:l(n=>n.groups),children:t},"Groups")),e.push(o.jsx("optgroup",{label:l(n=>n.devices),children:s},"Devices"))}else e.push(...s);return e},[d,i,l]);return o.jsxs(j,{name:"device_picker",label:p,value:r,title:u,onChange:h,className:"select validator w-64",...f,children:[o.jsx("option",{value:"",disabled:!0,children:l(e=>e.select_device)}),x]})});export{S as D};
