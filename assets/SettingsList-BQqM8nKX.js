import{r as g,j as s,B as j,F as h,X as v,a6 as V,ag as w,u as S}from"./index-DTLwKrFY.js";import{C as A}from"./CheckboxField-C_Qtx-pp.js";import{I as F}from"./InputField-fj8dQezf.js";import{N as E}from"./NumberField-CerCcLdV.js";import{S as $}from"./SelectField-Hd9BNgRL.js";const I=g.memo(l=>{const{defaultValues:n,label:c,detail:o,type:i,onSubmit:u,...x}=l,[m,d]=g.useState(n||[]);g.useEffect(()=>{d(n||[])},[n]);const e=g.useCallback((r,f)=>{d(b=>{const C=Array.from(b);return C[r]=i==="number"?f.target.value?f.target.valueAsNumber:"":f.target.value,C})},[i]),t=g.useCallback(()=>{d(r=>[...r,""])},[]),a=g.useCallback(r=>{d(f=>{const b=Array.from(f);return b.splice(r,1),b})},[]),p=g.useCallback(()=>u(i==="number"?m.filter(r=>typeof r=="number"):m.filter(r=>!!r)),[i,m,u]);return s.jsxs("fieldset",{className:"fieldset gap-2",children:[c&&s.jsxs("legend",{className:"fieldset-legend",children:[c,l.required?" *":""]}),s.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:m.map((r,f)=>s.jsxs("div",{className:"join min-w-xs",children:[s.jsx("input",{className:"input join-item",onBlur:b=>{e(f,b)},type:i,defaultValue:Number.isNaN(r)?"":r,...x}),s.jsx(j,{className:"btn btn-error btn-outline join-item",onClick:()=>a(f),children:s.jsx(h,{icon:v})})]},`${r}-${f}`))}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-2 items-center mt-1",children:[s.jsx(j,{onClick:t,className:"btn btn-sm btn-square btn-success ms-2",children:s.jsx(h,{icon:V})}),s.jsx(j,{onClick:p,className:"btn btn-sm btn-square btn-primary",children:s.jsx(h,{icon:w})}),o&&s.jsx("p",{className:"label text-wrap",children:o})]})]})}),O=g.memo(l=>{const{names:n,label:c,detail:o,defaultsChecked:i,onSubmit:u,...x}=l,[m,d]=g.useState(i||[]);g.useEffect(()=>{d(i||[])},[i]);const e=g.useCallback(a=>{d(p=>a.target.checked?[...p,a.target.name]:p.filter(r=>r!==a.target.name))},[]),t=g.useCallback(()=>u(m),[m,u]);return s.jsxs("fieldset",{className:"fieldset gap-2",children:[c&&s.jsxs("legend",{className:"fieldset-legend",children:[c,l.required?" *":""]}),s.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:n.map(a=>s.jsxs("label",{className:"label",children:[s.jsx("input",{name:a,className:"checkbox",type:"checkbox",onChange:e,checked:m.includes(a),...x}),a]},a))}),s.jsxs("div",{className:"flex flex-row flex-wrap gap-2 items-center mt-1",children:[s.jsx(j,{onClick:t,className:"btn btn-sm btn-square btn-primary",children:s.jsx(h,{icon:w})}),o&&s.jsx("p",{className:"label text-wrap",children:o})]})]})}),B={autoComplete:"off","data-bwignore":"true","data-lpignore":"true","data-1p-ignore":"true"},T=(l,n,c,o,i,u,x)=>{let m=n.type;if(Array.isArray(m))m=m.find(e=>e!=="null");else if(n.oneOf)return;const d=`${i}-${l}-${n.type}-${n.title}`;switch(m){case"boolean":return s.jsx(A,{name:l,label:l,detail:x,onChange:e=>!e.target.validationMessage&&o({[l]:e.target.checked}),required:u,defaultChecked:c??!1},d);case"integer":case"number":return n.enum?s.jsxs($,{name:l,label:l,detail:x,onChange:e=>!e.target.validationMessage&&o({[l]:e.target.value===""?null:Number.parseInt(e.target.value,10)}),required:u,defaultValue:c??"",children:[s.jsx("option",{value:"",disabled:u,children:"-"}),n.enum.map(e=>s.jsx("option",{value:e,children:e},e))]},d):s.jsx(E,{name:l,label:l,detail:x,onSubmit:(e,t)=>t&&o({[l]:e===""?null:e}),min:n.minimum,max:n.maximum,required:u,initialValue:c??""},d);case"string":return n.enum?s.jsxs($,{name:l,label:l,detail:x,onChange:e=>!e.target.validationMessage&&o({[l]:e.target.value===""?null:e.target.value}),required:u,defaultValue:c??"",children:[s.jsx("option",{value:"",disabled:u,children:"-"}),n.enum.map(e=>s.jsx("option",{value:e,children:e},e))]},d):s.jsx(F,{name:l,label:l,detail:x,type:"text",onBlur:e=>!e.target.validationMessage&&o({[l]:e.target.value===""?null:e.target.value}),required:u,defaultValue:c??"",...l==="password"?B:void 0},d);case"array":{const e=n.items;if(e&&typeof e=="object"&&"type"in e){if(e.enum)return s.jsx(O,{names:e.enum,label:l,detail:x,onSubmit:t=>o({[l]:t}),defaultsChecked:c??[]});if(e.type==="string"||e.type==="number")return s.jsx(I,{defaultValues:c??[],label:l,detail:x,onSubmit:t=>o({[l]:t}),type:e.type})}break}case"object":case"null":case void 0:console.error(`Unexpected property type ${m} for ${l}`,n)}},N=(l,n,c,o,i,u=[],x=!1,m="")=>{const d=[],e=[];for(const t in n){const a=n[t];if(typeof a=="boolean"||a.readOnly)continue;const p=m?`${m}-${t}`:t;if(a.properties)x||e.push(s.jsxs("div",{className:"list",children:[s.jsx("h3",{className:"list-row p-3 text-lg",children:a.title||t}),N(l,a.properties,c[t]||{},async r=>o({[t]:r}),i+1,a.required,!1,p)]},`${i}-${t}`));else{const r=a.oneOf?.find(f=>typeof f=="object"&&f.properties);if(r)(t!=="log_syslog"||c.log_output.includes("syslog"))&&e.push(s.jsxs("div",{className:"list",children:[s.jsx("h3",{className:"list-row p-3 text-lg",children:r.title||a.title||t}),N(l,r.properties,c[t]||{},async f=>o({[t]:f}),i+1,r.required,!1,p)]},`${i}-${t}`));else{const f=T(t,a,c[t]??a.default,o,i,u.includes(t),a.description?`${l(b=>b[p],{defaultValue:a.description})}${a.default!=null?` (${l(b=>b.default,{ns:"common",defaultValue:"Default"})}: ${a.default})`:""}`:a.default!=null?`${l(b=>b.default,{ns:"common",defaultValue:"Default"})}: ${a.default}}`:void 0);f&&d.push(s.jsx("div",{className:`list-row p-3 ${i!==0?` ps-${4+i*4}`:""}`,children:f},`${i}-${t}`))}}}return e.length>0?d.concat(e):d};function P({schema:l,data:n,set:c,rootOnly:o,namespace:i}){const{t:u}=S(["settingsSchemaDescriptions","common"]);return s.jsx("div",{className:"list bg-base-100",children:l.properties&&N(u,l.properties,n,c,0,l.required,o,i)})}export{P as S};
