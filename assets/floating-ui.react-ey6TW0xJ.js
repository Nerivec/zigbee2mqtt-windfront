import{r as c,ab as Me,ac as Oe,j as B}from"./index-DTLwKrFY.js";import{i as ee,b as Je,c as et,o as tt,d as nt,s as rt,e as ge,f as $,g as ne,h as Ae,j as ot,k as re,l as it,m as st}from"./floating-ui.dom-BSrWR8Gl.js";var at=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],ce=at.join(","),De=typeof Element>"u",H=De?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Q=!De&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},z=function(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&(typeof e.closest=="function"?e.closest("[inert]"):z(e.parentNode));return s},ct=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},ut=function(e,n,r){if(z(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(ce));return n&&H.call(e,ce)&&o.unshift(e),o=o.filter(r),o},ue=function(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!z(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),u=a.length?a:s.children,l=ue(u,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:s,candidates:l})}else{var d=H.call(s,ce);d&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var g=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!z(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(g&&p){var m=ue(g===!0?s.children:g.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:s,candidates:m})}else i.unshift.apply(i,s.children)}}return o},Ne=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Fe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ct(e))&&!Ne(e)?0:e.tabIndex},lt=function(e,n){var r=Fe(e);return r<0&&n&&!Ne(e)?0:r},ft=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Le=function(e){return e.tagName==="INPUT"},dt=function(e){return Le(e)&&e.type==="hidden"},vt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},gt=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},pt=function(e){if(!e.name)return!0;var n=e.form||Q(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=gt(o,e.form);return!i||i===e},mt=function(e){return Le(e)&&e.type==="radio"},bt=function(e){return mt(e)&&!pt(e)},ht=function(e){var n,r=e&&Q(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,u;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!i&&o;){var l,d,g;r=Q(o),o=(l=r)===null||l===void 0?void 0:l.host,i=!!((d=o)!==null&&d!==void 0&&(g=d.ownerDocument)!==null&&g!==void 0&&g.contains(o))}}return i},pe=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Rt=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var i=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(e).visibility==="hidden")return!0;var s=H.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(H.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var u=e;e;){var l=e.parentElement,d=Q(e);if(l&&!l.shadowRoot&&o(l)===!0)return pe(e);e.assignedSlot?e=e.assignedSlot:!l&&d!==e.ownerDocument?e=d.host:e=l}e=u}if(ht(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pe(e);return!1},yt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return H.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},Et=function(e,n){return!(n.disabled||dt(n)||Rt(n,e)||vt(n)||yt(n))},me=function(e,n){return!(bt(n)||Fe(n)<0||!Et(e,n))},xt=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},_e=function(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,u=lt(a,s),l=s?_e(o.candidates):a;u===0?s?n.push.apply(n,l):n.push(a):r.push({documentOrder:i,tabIndex:u,item:o,isScope:s,content:l})}),r.sort(ft).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},$e=function(e,n){n=n||{};var r;return n.getShadowRoot?r=ue([e],n.includeContainer,{filter:me.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:xt}):r=ut(e,n.includeContainer,me.bind(null,n)),_e(r)};function wt(){return/apple/i.test(navigator.vendor)}const be="data-floating-ui-focusable",St="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Ct(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function le(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Je(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function q(t){return"composedPath"in t?t.composedPath()[0]:t.target}function oe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Tt(t){return t.matches("html,body")}function X(t){return t?.ownerDocument||document}function It(t){return ee(t)&&t.matches(St)}function Pt(t){return t?t.hasAttribute(be)?t:t.querySelector("["+be+"]")||t:null}function G(t,e,n){return n===void 0&&(n=!0),t.filter(o=>{var i;return o.parentId===e&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...G(t,o.id,n)])}function kt(t){return"nativeEvent"in t}function he(t,e){return["mouse","pen"].includes(t)}var Mt=typeof document<"u",Ot=function(){},V=Mt?c.useLayoutEffect:Ot;const At={...Me},Dt=At.useInsertionEffect,Nt=Dt||(t=>t());function U(t){const e=c.useRef(()=>{});return Nt(()=>{e.current=t}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}const Be=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ke(t,e){const n=$e(t,Be()),r=n.length;if(r===0)return;const o=Ct(X(t)),i=n.indexOf(o),s=i===-1?e===1?0:r-1:i+e;return n[s]}function Ft(t){return Ke(X(t).body,1)||t}function Lt(t){return Ke(X(t).body,-1)||t}function ie(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!le(n,r)}function _t(t){$e(t,Be()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Re(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var $t=typeof document<"u",Bt=function(){},Z=$t?c.useLayoutEffect:Bt;function J(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!J(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!J(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function je(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ye(t,e){const n=je(t);return Math.round(e*n)/n}function se(t){const e=c.useRef(t);return Z(()=>{e.current=t}),e}function Kt(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:u,open:l}=t,[d,g]=c.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=c.useState(r);J(p,r)||m(r);const[E,f]=c.useState(null),[h,x]=c.useState(null),R=c.useCallback(v=>{v!==A.current&&(A.current=v,f(v))},[]),y=c.useCallback(v=>{v!==O.current&&(O.current=v,x(v))},[]),w=i||E,P=s||h,A=c.useRef(null),O=c.useRef(null),T=c.useRef(d),j=u!=null,F=se(u),_=se(o),D=se(l),L=c.useCallback(()=>{if(!A.current||!O.current)return;const v={placement:e,strategy:n,middleware:p};_.current&&(v.platform=_.current),et(A.current,O.current,v).then(C=>{const I={...C,isPositioned:D.current!==!1};b.current&&!J(T.current,I)&&(T.current=I,Oe.flushSync(()=>{g(I)}))})},[p,e,n,_,D]);Z(()=>{l===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,g(v=>({...v,isPositioned:!1})))},[l]);const b=c.useRef(!1);Z(()=>(b.current=!0,()=>{b.current=!1}),[]),Z(()=>{if(w&&(A.current=w),P&&(O.current=P),w&&P){if(F.current)return F.current(w,P,L);L()}},[w,P,L,F,j]);const k=c.useMemo(()=>({reference:A,floating:O,setReference:R,setFloating:y}),[R,y]),S=c.useMemo(()=>({reference:w,floating:P}),[w,P]),M=c.useMemo(()=>{const v={position:n,left:0,top:0};if(!S.floating)return v;const C=ye(S.floating,d.x),I=ye(S.floating,d.y);return a?{...v,transform:"translate("+C+"px, "+I+"px)",...je(S.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:C,top:I}},[n,a,S.floating,d.x,d.y]);return c.useMemo(()=>({...d,update:L,refs:k,elements:S,floatingStyles:M}),[d,L,k,S,M])}const jt=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ge({element:r.current,padding:o}).fn(n):{}:r?ge({element:r,padding:o}).fn(n):{}}}},cn=(t,e)=>({...tt(t),options:[t,e]}),un=(t,e)=>({...rt(t),options:[t,e]}),ln=(t,e)=>({...nt(t),options:[t,e]}),fn=(t,e)=>({...jt(t),options:[t,e]}),Wt="data-floating-ui-focusable",Ee="active",xe="selected",Vt={...Me};let we=!1,Ut=0;const Se=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ut++;function Yt(){const[t,e]=c.useState(()=>we?Se():void 0);return V(()=>{t==null&&e(Se())},[]),c.useEffect(()=>{we=!0},[]),t}const qt=Vt.useId,te=qt||Yt,dn=c.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:i,shift:s}},width:a=14,height:u=7,tipRadius:l=0,strokeWidth:d=0,staticOffset:g,stroke:p,d:m,style:{transform:E,...f}={},...h}=e,x=te(),[R,y]=c.useState(!1);if(V(()=>{if(!o)return;Ae(o).direction==="rtl"&&y(!0)},[o]),!o)return null;const[w,P]=r.split("-"),A=w==="top"||w==="bottom";let O=g;(A&&s!=null&&s.x||!A&&s!=null&&s.y)&&(O=null);const T=d*2,j=T/2,F=a/2*(l/-8+1),_=u/2*l/4,D=!!m,L=O&&P==="end"?"bottom":"top";let b=O&&P==="end"?"right":"left";O&&R&&(b=P==="end"?"left":"right");const k=i?.x!=null?O||i.x:"",S=i?.y!=null?O||i.y:"",M=m||"M0,0"+(" H"+a)+(" L"+(a-F)+","+(u-_))+(" Q"+a/2+","+u+" "+F+","+(u-_))+" Z",v={top:D?"rotate(180deg)":"",left:D?"rotate(90deg)":"rotate(-90deg)",bottom:D?"":"rotate(180deg)",right:D?"rotate(-90deg)":"rotate(90deg)"}[w];return B.jsxs("svg",{...h,"aria-hidden":!0,ref:n,width:D?a:a+T,height:a,viewBox:"0 0 "+a+" "+(u>a?u:a),style:{position:"absolute",pointerEvents:"none",[b]:k,[L]:S,[w]:A||D?"100%":"calc(100% - "+T/2+"px)",transform:[v,E].filter(C=>!!C).join(" "),...f},children:[T>0&&B.jsx("path",{clipPath:"url(#"+x+")",fill:"none",stroke:p,strokeWidth:T+(m?0:1),d:M}),B.jsx("path",{stroke:T&&!m?h.fill:"none",d:M}),B.jsx("clipPath",{id:x,children:B.jsx("rect",{x:-j,y:j*(D?-1:1),width:a+T,height:a})})]})});function Ht(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const Xt=c.createContext(null),Gt=c.createContext(null),We=()=>{var t;return((t=c.useContext(Xt))==null?void 0:t.id)||null},Ve=()=>c.useContext(Gt);function fe(t){return"data-floating-ui-"+t}const Zt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Ce=c.forwardRef(function(e,n){const[r,o]=c.useState();V(()=>{wt()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[fe("focus-guard")]:"",style:Zt};return B.jsx("span",{...e,...i})}),Qt={clipPath:"inset(50%)",position:"fixed",top:0,left:0},Ue=c.createContext(null),Te=fe("portal");function zt(t){t===void 0&&(t={});const{id:e,root:n}=t,r=te(),o=Jt(),[i,s]=c.useState(null),a=c.useRef(null);return V(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),V(()=>{if(!r||a.current)return;const u=e?document.getElementById(e):null;if(!u)return;const l=document.createElement("div");l.id=r,l.setAttribute(Te,""),u.appendChild(l),a.current=l,s(l)},[e,r]),V(()=>{if(n===null||!r||a.current)return;let u=n||o?.portalNode;u&&!st(u)&&(u=u.current),u=u||document.body;let l=null;e&&(l=document.createElement("div"),l.id=e,u.appendChild(l));const d=document.createElement("div");d.id=r,d.setAttribute(Te,""),u=l||u,u.appendChild(d),a.current=d,s(d)},[e,n,r,o]),i}function vn(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=zt({id:n,root:r}),[s,a]=c.useState(null),u=c.useRef(null),l=c.useRef(null),d=c.useRef(null),g=c.useRef(null),p=s?.modal,m=s?.open,E=!!s&&!s.modal&&s.open&&o&&!!(r||i);return c.useEffect(()=>{if(!i||!o||p)return;function f(h){i&&ie(h)&&(h.type==="focusin"?Re:_t)(i)}return i.addEventListener("focusin",f,!0),i.addEventListener("focusout",f,!0),()=>{i.removeEventListener("focusin",f,!0),i.removeEventListener("focusout",f,!0)}},[i,o,p]),c.useEffect(()=>{i&&(m||Re(i))},[m,i]),B.jsxs(Ue.Provider,{value:c.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:l,beforeInsideRef:d,afterInsideRef:g,portalNode:i,setFocusManagerState:a}),[o,i]),children:[E&&i&&B.jsx(Ce,{"data-type":"outside",ref:u,onFocus:f=>{if(ie(f,i)){var h;(h=d.current)==null||h.focus()}else{const x=s?s.domReference:null,R=Lt(x);R?.focus()}}}),E&&i&&B.jsx("span",{"aria-owns":i.id,style:Qt}),i&&Oe.createPortal(e,i),E&&i&&B.jsx(Ce,{"data-type":"outside",ref:l,onFocus:f=>{if(ie(f,i)){var h;(h=g.current)==null||h.focus()}else{const x=s?s.domReference:null,R=Ft(x);R?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,f.nativeEvent,"focus-out")}}})]})}const Jt=()=>c.useContext(Ue);function Ie(t){return ee(t.target)&&t.target.tagName==="BUTTON"}function en(t){return ee(t.target)&&t.target.tagName==="A"}function Pe(t){return It(t)}function gn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=t,{enabled:s=!0,event:a="click",toggle:u=!0,ignoreMouse:l=!1,keyboardHandlers:d=!0,stickIfOpen:g=!0}=e,p=c.useRef(),m=c.useRef(!1),E=c.useMemo(()=>({onPointerDown(f){p.current=f.pointerType},onMouseDown(f){const h=p.current;f.button===0&&a!=="click"&&(he(h)&&l||(n&&u&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="mousedown")?r(!1,f.nativeEvent,"click"):(f.preventDefault(),r(!0,f.nativeEvent,"click"))))},onClick(f){const h=p.current;if(a==="mousedown"&&p.current){p.current=void 0;return}he(h)&&l||(n&&u&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="click")?r(!1,f.nativeEvent,"click"):r(!0,f.nativeEvent,"click"))},onKeyDown(f){p.current=void 0,!(f.defaultPrevented||!d||Ie(f))&&(f.key===" "&&!Pe(i)&&(f.preventDefault(),m.current=!0),!en(f)&&f.key==="Enter"&&r(!(n&&u),f.nativeEvent,"click"))},onKeyUp(f){f.defaultPrevented||!d||Ie(f)||Pe(i)||f.key===" "&&m.current&&(m.current=!1,r(!(n&&u),f.nativeEvent,"click"))}}),[o,i,a,l,d,r,n,g,u]);return c.useMemo(()=>s?{reference:E}:{},[s,E])}const tn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},nn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ke=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function pn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:d=!1,referencePressEvent:g="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:E}=e,f=Ve(),h=U(typeof u=="function"?u:()=>!1),x=typeof u=="function"?h:u,R=c.useRef(!1),{escapeKey:y,outsidePress:w}=ke(m),{escapeKey:P,outsidePress:A}=ke(E),O=c.useRef(!1),T=U(b=>{var k;if(!n||!s||!a||b.key!=="Escape"||O.current)return;const S=(k=i.current.floatingContext)==null?void 0:k.nodeId,M=f?G(f.nodesRef.current,S):[];if(!y&&(b.stopPropagation(),M.length>0)){let v=!0;if(M.forEach(C=>{var I;if((I=C.context)!=null&&I.open&&!C.context.dataRef.current.__escapeKeyBubbles){v=!1;return}}),!v)return}r(!1,kt(b)?b.nativeEvent:b,"escape-key")}),j=U(b=>{var k;const S=()=>{var M;T(b),(M=q(b))==null||M.removeEventListener("keydown",S)};(k=q(b))==null||k.addEventListener("keydown",S)}),F=U(b=>{var k;const S=i.current.insideReactTree;i.current.insideReactTree=!1;const M=R.current;if(R.current=!1,l==="click"&&M||S||typeof x=="function"&&!x(b))return;const v=q(b),C="["+fe("inert")+"]",I=X(o.floating).querySelectorAll(C);let W=$(v)?v:null;for(;W&&!re(W);){const N=it(W);if(re(N)||!$(N))break;W=N}if(I.length&&$(v)&&!Tt(v)&&!le(v,o.floating)&&Array.from(I).every(N=>!le(W,N)))return;if(ee(v)&&L){const N=re(v),K=Ae(v),Y=/auto|scroll/,qe=N||Y.test(K.overflowX),He=N||Y.test(K.overflowY),Xe=qe&&v.clientWidth>0&&v.scrollWidth>v.clientWidth,Ge=He&&v.clientHeight>0&&v.scrollHeight>v.clientHeight,Ze=K.direction==="rtl",Qe=Ge&&(Ze?b.offsetX<=v.offsetWidth-v.clientWidth:b.offsetX>v.clientWidth),ze=Xe&&b.offsetY>v.clientHeight;if(Qe||ze)return}const de=(k=i.current.floatingContext)==null?void 0:k.nodeId,Ye=f&&G(f.nodesRef.current,de).some(N=>{var K;return oe(b,(K=N.context)==null?void 0:K.elements.floating)});if(oe(b,o.floating)||oe(b,o.domReference)||Ye)return;const ve=f?G(f.nodesRef.current,de):[];if(ve.length>0){let N=!0;if(ve.forEach(K=>{var Y;if((Y=K.context)!=null&&Y.open&&!K.context.dataRef.current.__outsidePressBubbles){N=!1;return}}),!N)return}r(!1,b,"outside-press")}),_=U(b=>{var k;const S=()=>{var M;F(b),(M=q(b))==null||M.removeEventListener(l,S)};(k=q(b))==null||k.addEventListener(l,S)});c.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=y,i.current.__outsidePressBubbles=w;let b=-1;function k(I){r(!1,I,"ancestor-scroll")}function S(){window.clearTimeout(b),O.current=!0}function M(){b=window.setTimeout(()=>{O.current=!1},ot()?5:0)}const v=X(o.floating);a&&(v.addEventListener("keydown",P?j:T,P),v.addEventListener("compositionstart",S),v.addEventListener("compositionend",M)),x&&v.addEventListener(l,A?_:F,A);let C=[];return p&&($(o.domReference)&&(C=ne(o.domReference)),$(o.floating)&&(C=C.concat(ne(o.floating))),!$(o.reference)&&o.reference&&o.reference.contextElement&&(C=C.concat(ne(o.reference.contextElement)))),C=C.filter(I=>{var W;return I!==((W=v.defaultView)==null?void 0:W.visualViewport)}),C.forEach(I=>{I.addEventListener("scroll",k,{passive:!0})}),()=>{a&&(v.removeEventListener("keydown",P?j:T,P),v.removeEventListener("compositionstart",S),v.removeEventListener("compositionend",M)),x&&v.removeEventListener(l,A?_:F,A),C.forEach(I=>{I.removeEventListener("scroll",k)}),window.clearTimeout(b)}},[i,o,a,x,l,n,r,p,s,y,w,T,P,j,F,A,_]),c.useEffect(()=>{i.current.insideReactTree=!1},[i,x,l]);const D=c.useMemo(()=>({onKeyDown:T,...d&&{[tn[g]]:b=>{r(!1,b.nativeEvent,"reference-press")},...g!=="click"&&{onClick(b){r(!1,b.nativeEvent,"reference-press")}}}}),[T,r,d,g]),L=c.useMemo(()=>({onKeyDown:T,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[nn[l]]:()=>{i.current.insideReactTree=!0}}),[T,l,i]);return c.useMemo(()=>s?{reference:D,floating:L}:{},[s,D,L])}function rn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=te(),i=c.useRef({}),[s]=c.useState(()=>Ht()),a=We()!=null,[u,l]=c.useState(r.reference),d=U((m,E,f)=>{i.current.openEvent=m?E:void 0,s.emit("openchange",{open:m,event:E,reason:f,nested:a}),n?.(m,E,f)}),g=c.useMemo(()=>({setPositionReference:l}),[]),p=c.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return c.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:p,events:s,floatingId:o,refs:g}),[e,d,p,s,o,g])}function mn(t){t===void 0&&(t={});const{nodeId:e}=t,n=rn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=c.useState(null),[a,u]=c.useState(null),d=o?.domReference||i,g=c.useRef(null),p=Ve();V(()=>{d&&(g.current=d)},[d]);const m=Kt({...t,elements:{...o,...a&&{reference:a}}}),E=c.useCallback(y=>{const w=$(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),getClientRects:()=>y.getClientRects(),contextElement:y}:y;u(w),m.refs.setReference(w)},[m.refs]),f=c.useCallback(y=>{($(y)||y===null)&&(g.current=y,s(y)),($(m.refs.reference.current)||m.refs.reference.current===null||y!==null&&!$(y))&&m.refs.setReference(y)},[m.refs]),h=c.useMemo(()=>({...m.refs,setReference:f,setPositionReference:E,domReference:g}),[m.refs,f,E]),x=c.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),R=c.useMemo(()=>({...m,...r,refs:h,elements:x,nodeId:e}),[m,h,x,e,r]);return V(()=>{r.dataRef.current.floatingContext=R;const y=p?.nodesRef.current.find(w=>w.id===e);y&&(y.context=R)}),c.useMemo(()=>({...m,context:R,refs:h,elements:x}),[m,h,x,R])}function ae(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[Ee]:s,[xe]:a,...u}=t;i=u}return{...n==="floating"&&{tabIndex:-1,[Wt]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(u=>{let[l,d]=u;if(!(o&&[Ee,xe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof d=="function"){var g;(g=r.get(l))==null||g.push(d),s[l]=function(){for(var p,m=arguments.length,E=new Array(m),f=0;f<m;f++)E[f]=arguments[f];return(p=r.get(l))==null?void 0:p.map(h=>h(...E)).find(h=>h!==void 0)}}}else s[l]=d}),s),{})}}function bn(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),o=c.useCallback(a=>ae(a,t,"reference"),e),i=c.useCallback(a=>ae(a,t,"floating"),n),s=c.useCallback(a=>ae(a,t,"item"),r);return c.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const on=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function hn(t,e){var n,r;e===void 0&&(e={});const{open:o,elements:i,floatingId:s}=t,{enabled:a=!0,role:u="dialog"}=e,l=te(),d=((n=i.domReference)==null?void 0:n.id)||l,g=c.useMemo(()=>{var R;return((R=Pt(i.floating))==null?void 0:R.id)||s},[i.floating,s]),p=(r=on.get(u))!=null?r:u,E=We()!=null,f=c.useMemo(()=>p==="tooltip"||u==="label"?{["aria-"+(u==="label"?"labelledby":"describedby")]:o?g:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":p==="alertdialog"?"dialog":p,"aria-controls":o?g:void 0,...p==="listbox"&&{role:"combobox"},...p==="menu"&&{id:d},...p==="menu"&&E&&{role:"menuitem"},...u==="select"&&{"aria-autocomplete":"none"},...u==="combobox"&&{"aria-autocomplete":"list"}},[p,g,E,o,d,u]),h=c.useMemo(()=>{const R={id:g,...p&&{role:p}};return p==="tooltip"||u==="label"?R:{...R,...p==="menu"&&{"aria-labelledby":d}}},[p,g,d,u]),x=c.useCallback(R=>{let{active:y,selected:w}=R;const P={role:"option",...y&&{id:g+"-fui-option"}};switch(u){case"select":case"combobox":return{...P,"aria-selected":w}}return{}},[g,u]);return c.useMemo(()=>a?{reference:f,floating:h,item:x}:{},[a,f,h,x])}export{vn as F,ln as a,fn as b,hn as c,pn as d,bn as e,dn as f,gn as g,cn as o,un as s,mn as u};
