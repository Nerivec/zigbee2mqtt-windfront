import{u as x,j as n,E as j,a as k,D as y,r as l,s as h,ds as E,B as f,dt as O,a5 as T,du as A,dv as R}from"./index-DTLwKrFY.js";import{I as w}from"./InputField-fj8dQezf.js";import{S as q}from"./SelectField-Hd9BNgRL.js";import{T as C}from"./TextareaField-DlAGnMTm.js";import{I as g}from"./InfoAlert-BXO5hx7w.js";import"./envs-CRUy-_iG.js";const D=({sourceIdx:s})=>{const{t:a}=x(["devConsole","common"]),[i,o]=l.useState(""),[m,t]=l.useState("{}"),u=l.useMemo(()=>{if(!i)return!1;if(m!=="")try{const c=JSON.parse(m);if(typeof c!="object"||Array.isArray(c))return!1}catch{return!1}return!0},[i,m]),v=l.useCallback(async()=>{await h(s,i,m===""?m:JSON.parse(m))},[s,i,m]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(c=>c.send_mqtt)}),n.jsx(g,{children:n.jsx("a",{href:E,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(c=>c.read_the_docs_info,{ns:"common"})})}),n.jsx(w,{type:"text",name:"topic",label:a(c=>c.topic),detail:a(c=>c.mqtt_topic_info),placeholder:"bridge/request/permit_join",value:i,onChange:c=>o(c.target.value),className:"input validator w-full",required:!0}),n.jsx(C,{name:"payload",label:a(c=>c.payload,{ns:"common"}),rows:5,value:m,onChange:c=>t(c.target.value),className:"textarea validator w-full"}),n.jsx("div",{className:"join join-horizontal mt-2",children:n.jsx(f,{onClick:v,disabled:!u,className:"btn btn-success",children:a(c=>c.send,{ns:"common"})})})]})},M=({sourceIdx:s})=>{const{t:a}=x(["devConsole","common"]),i=k(y(e=>e.converters[s])),[o,m]=l.useState(),[t,u]=l.useState({name:"",code:""}),v=l.useMemo(()=>(o||!!t.name)&&!!t.code,[o,t]),c=l.useCallback(e=>{if(e.target.value){const d=i.find(S=>S.name===e.target.value);d&&(m(d),u(d))}else m(void 0),u({name:"",code:""})},[i]),b=l.useCallback(e=>{u(d=>({name:e.target.value,code:d.code}))},[]),r=l.useCallback(e=>{u(d=>({name:d.name,code:e.target.value}))},[]),p=l.useCallback(async()=>{await h(s,"bridge/request/converter/save",t)},[s,t]),N=l.useCallback(async()=>{await h(s,"bridge/request/converter/remove",{name:t.name})},[s,t.name]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(e=>e.add_update_external_converter)}),n.jsxs(g,{children:[n.jsx("a",{href:A,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.read_the_docs_info,{ns:"common"})}),n.jsx("a",{href:R,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.codespace_info)})]}),n.jsxs(q,{name:"converter_name_edit",label:a(e=>e.select_converter_to_edit),onChange:c,value:o?.name??"",children:[n.jsxs("option",{value:"",children:["N/A - ",a(e=>e.create_new_converter)]}),i.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))]}),n.jsx(w,{name:"converter_name",label:a(e=>e.name,{ns:"common"}),type:"text",onChange:b,value:t.name,readOnly:o!==void 0,required:!0}),n.jsx(C,{name:"converter_code",label:a(e=>e.code),rows:5,value:t.code,onChange:r,className:"textarea validator w-full",required:!0}),n.jsxs("div",{className:"join join-horizontal mt-2",children:[n.jsx(f,{onClick:p,disabled:!v,className:"btn btn-success join-item",children:a(e=>e.save,{ns:"common"})}),n.jsx(T,{onClick:N,disabled:!o,className:"btn btn-error join-item",title:a(e=>e.delete,{ns:"common"}),modalDescription:a(e=>e.dialog_confirmation_prompt,{ns:"common"}),modalCancelLabel:a(e=>e.cancel,{ns:"common"}),children:a(e=>e.delete,{ns:"common"})})]})]})},P=({sourceIdx:s})=>{const{t:a}=x(["devConsole","common"]),i=k(y(e=>e.extensions[s])),[o,m]=l.useState(),[t,u]=l.useState({name:"",code:""}),v=l.useMemo(()=>(o||!!t.name)&&!!t.code,[o,t]),c=l.useCallback(e=>{if(e.target.value){const d=i.find(S=>S.name===e.target.value);d&&(m(d),u(d))}else m(void 0),u({name:"",code:""})},[i]),b=l.useCallback(e=>{u(d=>({name:e.target.value,code:d.code}))},[]),r=l.useCallback(e=>{u(d=>({name:d.name,code:e.target.value}))},[]),p=l.useCallback(async()=>{await h(s,"bridge/request/extension/save",t)},[s,t]),N=l.useCallback(async()=>{await h(s,"bridge/request/extension/remove",{name:t.name})},[s,t.name]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(e=>e.add_update_external_extension)}),n.jsx(g,{children:n.jsx("a",{href:O,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(e=>e.read_the_docs_info,{ns:"common"})})}),n.jsxs(q,{name:"extension_name_edit",label:a(e=>e.select_extension_to_edit),onChange:c,value:o?.name??"",children:[n.jsxs("option",{value:"",children:["N/A - ",a(e=>e.create_new_extension)]}),i.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))]}),n.jsx(w,{name:"extension_name",label:a(e=>e.name,{ns:"common"}),type:"text",onChange:b,value:t.name,readOnly:o!==void 0,required:!0}),n.jsx(C,{name:"extension_code",label:a(e=>e.code),rows:5,value:t.code,onChange:r,className:"textarea validator w-full",required:!0}),n.jsxs("div",{className:"join join-horizontal mt-2",children:[n.jsx(f,{onClick:p,disabled:!v,className:"btn btn-success join-item",children:a(e=>e.save,{ns:"common"})}),n.jsx(T,{onClick:N,disabled:!o,className:"btn btn-error join-item",title:a(e=>e.delete,{ns:"common"}),modalDescription:a(e=>e.dialog_confirmation_prompt,{ns:"common"}),modalCancelLabel:a(e=>e.cancel,{ns:"common"}),children:a(e=>e.delete,{ns:"common"})})]})]})},F=({sourceIdx:s})=>{const{t:a}=x(["devConsole","common"]),i=k(y(r=>r.bridgeDefinitions[s].actions??[])),[o,m]=l.useState("raw"),[t,u]=l.useState("{}"),v=l.useMemo(()=>{if(!o)return!1;if(t!=="")try{const r=JSON.parse(t);if(typeof r!="object"||Array.isArray(r))return!1}catch{return!1}return!0},[o,t]),c=l.useCallback(r=>{r.target.value&&m(r.target.value)},[]),b=l.useCallback(async()=>{await h(s,"bridge/request/action",{action:o,params:t===""?t:JSON.parse(t)})},[s,o,t]);return n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-lg mb-2",children:a(r=>r.actions)}),n.jsx(g,{children:n.jsx("a",{href:E,target:"_blank",rel:"noreferrer",className:"link link-hover",children:a(r=>r.read_the_docs_info,{ns:"common"})})}),n.jsx(q,{name:"action",label:a(r=>r.action),onChange:c,value:o,children:i.map(r=>n.jsx("option",{value:r,children:r},r))}),n.jsx(C,{name:"payload",label:a(r=>r.payload,{ns:"common"}),rows:5,value:t,onChange:r=>u(r.target.value),className:"textarea validator w-full"}),n.jsx("div",{className:"join join-horizontal mt-2",children:n.jsx(f,{onClick:b,disabled:!v,className:"btn btn-success",children:a(r=>r.send,{ns:"common"})})})]})};function L(s,a){switch(a){case"mqtt":return n.jsx(D,{sourceIdx:s});case"external_converters":return n.jsx(M,{sourceIdx:s});case"external_extensions":return n.jsx(P,{sourceIdx:s});case"actions":return n.jsx(F,{sourceIdx:s})}}const _=({isActive:s})=>s?"tab tab-active":"tab";function Q({sourceIdx:s,tab:a}){const{t:i}=x("devConsole");return n.jsxs("div",{className:"tabs tabs-border",children:[n.jsx(j,{to:`/settings/${s}/dev-console/mqtt`,className:_,children:i(o=>o.mqtt)}),n.jsx(j,{to:`/settings/${s}/dev-console/external_converters`,className:_,children:i(o=>o.external_converters)}),n.jsx(j,{to:`/settings/${s}/dev-console/external_extensions`,className:_,children:i(o=>o.external_extensions)}),n.jsx(j,{to:`/settings/${s}/dev-console/actions`,className:_,children:i(o=>o.actions)}),n.jsx("div",{className:"tab-content block h-full bg-base-100 p-3",children:L(s,a)})]})}export{Q as default};
