#!/usr/bin/env node

import { readFileSync, writeFileSync } from 'fs';
import set from 'lodash/set.js';
import untranslated from './find-untranslated.mjs';

// Product names that should remain in English
const PRODUCT_NAMES = [
   'Zigbee2MQTT', 'zigbee2mqtt', 'Home Assistant', 'MQTT', 'WebSocket', 'SSL/TLS', 
   'IEEE', 'LQI', 'RSSI', 'Z-Stack', 'CoordinatorBackup', 'DeconzBackup', 
   'ZStackBackup', 'OTAU', 'EZSP', 'OTA', 'Hue', 'IKEA', 'Xiaomi', 'Aqara',
   'GitHub', 'JSON', 'HTTP', 'HTTPS', 'API', 'URL', 'TCP', 'UDP', 'Wi-Fi',
   'ZHA', 'deCONZ', 'ConBee', 'CC2531', 'CC2538', 'CC2652', 'CC1352',
   'ZNP', 'ZNVP', 'ZnV', 'zStack', 'EmberZNet', 'SiLabs', 'ConBee II',
   'Z2M', 'BSD', 'PID', 'syslogd', 'OS X', 'QoS', 'USB', 'npm', 'yarn',
   'localhost', 'unix', 'tcp4', 'udp4', 'tls4', 'AWS IoT', 'Azure IoT Hub',
   'Google Cloud IoT', 'IBM Watson IoT', 'GreenPower'
];

// Comprehensive Polish translation dictionary
const POLISH_TRANSLATIONS = {
  // Common UI terms
  'Loading...': 'Ładowanie...',
  'Token': 'Token',
  'Nodes': 'Węzły',
  'Extensions': 'Rozszerzenia',
  'Firmware version': 'Wersja oprogramowania układowego',
  'App': 'Aplikacja',
  'Stack': 'Stos',
  'Blocklist': 'Lista blokowanych',
  'Revision': 'Rewizja',
  'Donate': 'Wspomóż',
  'Experimental': 'Eksperymentalne',
  'Frontend': 'Interfejs użytkownika',
  'Frontend version': 'Wersja interfejsu użytkownika',
  'Main': 'Główne',
  'OTA updates': 'Aktualizacje OTA',
  'Passlist': 'Lista dozwolonych',
  'Serial': 'Port szeregowy',
  'Tools': 'Narzędzia',
  'Translate': 'Tłumacz',
  'Stats': 'Statystyki',
  'Home Assistant integration': 'Integracja z Home Assistant',
  'zigbee-herdsman-converters version': 'Wersja zigbee-herdsman-converters',
  'zigbee-herdsman version': 'Wersja zigbee-herdsman',
  'Models': 'Modele',
  'Total': 'Łącznie',
  'Unknown': 'Nieznany',
  'Unknown device': 'Nieznane urządzenie',
  'Friendly name': 'Przyjazna nazwa',
  'Model': 'Model',
  'Icon': 'Ikona',
  'Last seen': 'Ostatnio widziane',
  'Status': 'Status',
  'Available': 'Dostępne',
  'Unavailable': 'Niedostępne',
  'Supported': 'Obsługiwane',
  'Not supported': 'Nieobsługiwane',
  'Definition': 'Definicja',
  'Remove': 'Usuń',
  'Save': 'Zapisz',
  'Cancel': 'Anuluj',
  'Add': 'Dodaj',
  'Edit': 'Edytuj',
  'Delete': 'Usuń',
  'Close': 'Zamknij',
  'Open': 'Otwórz',
  'Settings': 'Ustawienia',
  'Options': 'Opcje',
  'Actions': 'Akcje',
  'Properties': 'Właściwości',
  'Value': 'Wartość',
  'Type': 'Typ',
  'Description': 'Opis',
  'Default': 'Domyślny',
  'Required': 'Wymagane',
  'Optional': 'Opcjonalne',
  'Enable': 'Włącz',
  'Disable': 'Wyłącz',
  'Enabled': 'Włączone',
  'Disabled': 'Wyłączone',
  'Apply': 'Zastosuj',
  'Reset': 'Resetuj',
  'Clear': 'Wyczyść',
  'Refresh': 'Odśwież',
  'Update': 'Aktualizuj',
  'Install': 'Zainstaluj',
  'Uninstall': 'Odinstaluj',
  'Start': 'Uruchom',
  'Stop': 'Zatrzymaj',
  'Restart': 'Uruchom ponownie',
  'Pause': 'Wstrzymaj',
  'Resume': 'Wznów',
  'Connect': 'Połącz',
  'Disconnect': 'Rozłącz',
  'Online': 'Online',
  'Offline': 'Offline',
  'Connected': 'Połączony',
  'Disconnected': 'Rozłączony',
  'On': 'Włączony',
  'Off': 'Wyłączony',
  'Yes': 'Tak',
  'No': 'Nie',
  'True': 'Prawda',
  'False': 'Fałsz',
  'None': 'Brak',
  'All': 'Wszystkie',
  'Any': 'Dowolny',
  'Auto': 'Automatyczny',
  'Manual': 'Ręczny',
  'Custom': 'Niestandardowy',
  'Advanced': 'Zaawansowane',
  'Basic': 'Podstawowe',
  'Simple': 'Prosty',
  'Complex': 'Złożony',
  'High': 'Wysoki',
  'Medium': 'Średni',
  'Low': 'Niski',
  'Fast': 'Szybki',
  'Slow': 'Wolny',
  'Normal': 'Normalny',
  'Warning': 'Ostrzeżenie',
  'Error': 'Błąd',
  'Info': 'Informacja',
  'Success': 'Sukces',
  'Failed': 'Niepowodzenie',
  'Pending': 'Oczekujące',
  'Complete': 'Zakończone',
  'Active': 'Aktywny',
  'Inactive': 'Nieaktywny',
  'Ready': 'Gotowy',
  'Busy': 'Zajęty',
  'Idle': 'Bezczynny',
  'Running': 'Uruchomiony',
  'Stopped': 'Zatrzymany',
  'Paused': 'Wstrzymany',
  'Loading': 'Ładowanie',
  'Saving': 'Zapisywanie',
  'Updating': 'Aktualizowanie',
  'Processing': 'Przetwarzanie',
  'Searching': 'Wyszukiwanie',
  'Found': 'Znaleziono',
  'Not found': 'Nie znaleziono',
  'Empty': 'Pusty',
  'Full': 'Pełny',
  'Valid': 'Prawidłowy',
  'Invalid': 'Nieprawidłowy',
  'Available updates': 'Dostępne aktualizacje',
  'No updates available': 'Brak dostępnych aktualizacji',
  'Check for updates': 'Sprawdź aktualizacje',
  'Download': 'Pobierz',
  'Upload': 'Prześlij',
  'Import': 'Importuj',
  'Export': 'Eksportuj',
  'Backup': 'Kopia zapasowa',
  'Restore': 'Przywróć',
  'Copy': 'Kopiuj',
  'Paste': 'Wklej',
  'Cut': 'Wytnij',
  'Duplicate': 'Duplikuj',
  'Move': 'Przenieś',
  'Rename': 'Zmień nazwę',
  'Create': 'Utwórz',
  'Generate': 'Generuj',
  'Build': 'Zbuduj',
  'Compile': 'Kompiluj',
  'Execute': 'Wykonaj',
  'Run': 'Uruchom',
  'Test': 'Testuj',
  'Debug': 'Debuguj',
  'Monitor': 'Monitoruj',
  'Track': 'Śledź',
  'Log': 'Dziennik',
  'Report': 'Raport',
  'Chart': 'Wykres',
  'Graph': 'Graf',
  'Table': 'Tabela',
  'List': 'Lista',
  'Grid': 'Siatka',
  'Tree': 'Drzewo',
  'Map': 'Mapa',
  'View': 'Widok',
  'Show': 'Pokaż',
  'Hide': 'Ukryj',
  'Expand': 'Rozwiń',
  'Collapse': 'Zwiń',
  'Minimize': 'Minimalizuj',
  'Maximize': 'Maksymalizuj',
  'Fullscreen': 'Pełny ekran',
  'Exit fullscreen': 'Wyjdź z pełnego ekranu',
  'Next': 'Następny',
  'Previous': 'Poprzedni',
  'First': 'Pierwszy',
  'Last': 'Ostatni',
  'Page': 'Strona',
  'Pages': 'Strony',
  'Item': 'Element',
  'Items': 'Elementy',
  'Row': 'Wiersz',
  'Rows': 'Wiersze',
  'Column': 'Kolumna',
  'Columns': 'Kolumny',
  'Field': 'Pole',
  'Fields': 'Pola',
  'Name': 'Nazwa',
  'Address': 'Adres',
  'Port': 'Port',
  'Path': 'Ścieżka',
  'File': 'Plik',
  'Files': 'Pliki',
  'Folder': 'Folder',
  'Folders': 'Foldery',
  'Directory': 'Katalog',
  'Directories': 'Katalogi',
  'Location': 'Lokalizacja',
  'Position': 'Pozycja',
  'Coordinates': 'Współrzędne',
  'Size': 'Rozmiar',
  'Length': 'Długość',
  'Width': 'Szerokość',
  'Height': 'Wysokość',
  'Depth': 'Głębokość',
  'Weight': 'Waga',
  'Volume': 'Objętość',
  'Speed': 'Prędkość',
  'Rate': 'Częstotliwość',
  'Frequency': 'Częstotliwość',
  'Duration': 'Czas trwania',
  'Timeout': 'Limit czasu',
  'Delay': 'Opóźnienie',
  'Interval': 'Interwał',
  'Period': 'Okres',
  'Cycle': 'Cykl',
  'Count': 'Liczba',
  'Number': 'Numer',
  'Amount': 'Ilość',
  'Quantity': 'Ilość',
  'Limit': 'Limit',
  'Maximum': 'Maksimum',
  'Minimum': 'Minimum',
  'Range': 'Zakres',
  'Scale': 'Skala',
  'Level': 'Poziom',
  'Degree': 'Stopień',
  'Percentage': 'Procent',
  'Ratio': 'Stosunek',
  'Version': 'Wersja',
  'Release': 'Wydanie',
  'Build': 'Kompilacja',
  'Edition': 'Edycja',
  'Update': 'Aktualizacja',
  'Upgrade': 'Ulepszenie',
  'Downgrade': 'Obniżenie wersji',
  'Install': 'Instalacja',
  'Uninstall': 'Odinstalowanie',
  'Setup': 'Konfiguracja',
  'Configuration': 'Konfiguracja',
  'Settings': 'Ustawienia',
  'Preferences': 'Preferencje',
  'Options': 'Opcje',
  'Parameters': 'Parametry',
  'Arguments': 'Argumenty',
  'Variables': 'Zmienne',
  'Constants': 'Stałe',
  'Properties': 'Właściwości',
  'Attributes': 'Atrybuty',
  'Features': 'Funkcje',
  'Capabilities': 'Możliwości',
  'Functions': 'Funkcje',
  'Methods': 'Metody',
  'Commands': 'Polecenia',
  'Operations': 'Operacje',
  'Procedures': 'Procedury',
  'Processes': 'Procesy',
  'Tasks': 'Zadania',
  'Jobs': 'Zadania',
  'Services': 'Usługi',
  'Resources': 'Zasoby',
  'Components': 'Komponenty',
  'Modules': 'Moduły',
  'Plugins': 'Wtyczki',
  'Extensions': 'Rozszerzenia',
  'Add-ons': 'Dodatki',
  'Packages': 'Pakiety',
  'Libraries': 'Biblioteki',
  'Frameworks': 'Frameworki',
  'Platforms': 'Platformy',
  'Systems': 'Systemy',
  'Applications': 'Aplikacje',
  'Programs': 'Programy',
  'Software': 'Oprogramowanie',
  'Hardware': 'Sprzęt',
  'Firmware': 'Oprogramowanie układowe',
  'Driver': 'Sterownik',
  'Drivers': 'Sterowniki',
  'Device': 'Urządzenie',
  'Devices': 'Urządzenia',
  'Equipment': 'Sprzęt',
  'Tool': 'Narzędzie',
  'Tools': 'Narzędzia',
  'Utility': 'Narzędzie',
  'Utilities': 'Narzędzia',
  'Helper': 'Pomocnik',
  'Helpers': 'Pomocnicy',
  'Assistant': 'Asystent',
  'Assistants': 'Asystenci',
  'Agent': 'Agent',
  'Agents': 'Agenci',
  'Client': 'Klient',
  'Clients': 'Klienci',
  'Server': 'Serwer',
  'Servers': 'Serwery',
  'Host': 'Host',
  'Hosts': 'Hosty',
  'Node': 'Węzeł',
  'Nodes': 'Węzły',
  'Network': 'Sieć',
  'Networks': 'Sieci',
  'Connection': 'Połączenie',
  'Connections': 'Połączenia',
  'Link': 'Link',
  'Links': 'Linki',
  'Route': 'Trasa',
  'Routes': 'Trasy',
  'Path': 'Ścieżka',
  'Paths': 'Ścieżki',
  'Channel': 'Kanał',
  'Channels': 'Kanały',
  'Port': 'Port',
  'Ports': 'Porty',
  'Interface': 'Interfejs',
  'Interfaces': 'Interfejsy',
  'Protocol': 'Protokół',
  'Protocols': 'Protokoły',
  'Service': 'Usługa',
  'Services': 'Usługi',
  'API': 'API',
  'APIs': 'API',
  'Endpoint': 'Punkt końcowy',
  'Endpoints': 'Punkty końcowe',
  'Method': 'Metoda',
  'Methods': 'Metody',
  'Request': 'Żądanie',
  'Requests': 'Żądania',
  'Response': 'Odpowiedź',
  'Responses': 'Odpowiedzi',
  'Message': 'Wiadomość',
  'Messages': 'Wiadomości',
  'Event': 'Zdarzenie',
  'Events': 'Zdarzenia',
  'Signal': 'Sygnał',
  'Signals': 'Sygnały',
  'Notification': 'Powiadomienie',
  'Notifications': 'Powiadomienia',
  'Alert': 'Alert',
  'Alerts': 'Alerty',
  'Warning': 'Ostrzeżenie',
  'Warnings': 'Ostrzeżenia',
  'Error': 'Błąd',
  'Errors': 'Błędy',
  'Exception': 'Wyjątek',
  'Exceptions': 'Wyjątki',
  'Fault': 'Usterka',
  'Faults': 'Usterki',
  'Issue': 'Problem',
  'Issues': 'Problemy',
  'Problem': 'Problem',
  'Problems': 'Problemy',
  'Bug': 'Błąd',
  'Bugs': 'Błędy',
  'Fix': 'Poprawka',
  'Fixes': 'Poprawki',
  'Solution': 'Rozwiązanie',
  'Solutions': 'Rozwiązania',
  'Resolution': 'Rozwiązanie',
  'Resolutions': 'Rozwiązania',
  'Workaround': 'Obejście',
  'Workarounds': 'Obejścia',
  'Improvement': 'Ulepszenie',
  'Improvements': 'Ulepszenia',
  'Enhancement': 'Rozszerzenie',
  'Enhancements': 'Rozszerzenia',
  'Feature': 'Funkcja',
  'Features': 'Funkcje',
  'Function': 'Funkcja',
  'Functions': 'Funkcje',
  'Capability': 'Możliwość',
  'Capabilities': 'Możliwości',
  'Ability': 'Umiejętność',
  'Abilities': 'Umiejętności',
  'Skill': 'Umiejętność',
  'Skills': 'Umiejętności',
  'Knowledge': 'Wiedza',
  'Information': 'Informacja',
  'Data': 'Dane',
  'Content': 'Zawartość',
  'Text': 'Tekst',
  'String': 'Ciąg znaków',
  'Number': 'Liczba',
  'Integer': 'Liczba całkowita',
  'Float': 'Liczba zmiennoprzecinkowa',
  'Boolean': 'Wartość logiczna',
  'Array': 'Tablica',
  'Object': 'Obiekt',
  'List': 'Lista',
  'Map': 'Mapa',
  'Set': 'Zbiór',
  'Collection': 'Kolekcja',
  'Group': 'Grupa',
  'Category': 'Kategoria',
  'Class': 'Klasa',
  'Type': 'Typ',
  'Kind': 'Rodzaj',
  'Sort': 'Sortowanie',
  'Order': 'Kolejność',
  'Sequence': 'Sekwencja',
  'Series': 'Serie',
  'Chain': 'Łańcuch',
  'Queue': 'Kolejka',
  'Stack': 'Stos',
  'Buffer': 'Bufor',
  'Cache': 'Pamięć podręczna',
  'Memory': 'Pamięć',
  'Storage': 'Pamięć masowa',
  'Database': 'Baza danych',
  'Repository': 'Repozytorium',
  'Archive': 'Archiwum',
  'History': 'Historia',
  'Log': 'Dziennik',
  'Record': 'Rekord',
  'Entry': 'Wpis',
  'Item': 'Element',
  'Element': 'Element',
  'Component': 'Komponent',
  'Part': 'Część',
  'Piece': 'Kawałek',
  'Fragment': 'Fragment',
  'Section': 'Sekcja',
  'Chapter': 'Rozdział',
  'Page': 'Strona',
  'Document': 'Dokument',
  'File': 'Plik',
  'Folder': 'Folder',
  'Directory': 'Katalog',
  'Path': 'Ścieżka',
  'Location': 'Lokalizacja',
  'Position': 'Pozycja',
  'Place': 'Miejsce',
  'Area': 'Obszar',
  'Region': 'Region',
  'Zone': 'Strefa',
  'Territory': 'Terytorium',
  'Domain': 'Domena',
  'Realm': 'Obszar',
  'Scope': 'Zakres',
  'Range': 'Zakres',
  'Span': 'Rozpiętość',
  'Extent': 'Zasięg',
  'Boundary': 'Granica',
  'Limit': 'Limit',
  'Threshold': 'Próg',
  'Margin': 'Margines',
  'Border': 'Granica',
  'Edge': 'Krawędź',
  'Corner': 'Róg',
  'Side': 'Strona',
  'Top': 'Góra',
  'Bottom': 'Dół',
  'Left': 'Lewo',
  'Right': 'Prawo',
  'Center': 'Środek',
  'Middle': 'Środek',
  'Front': 'Przód',
  'Back': 'Tył',
  'Inside': 'Wewnątrz',
  'Outside': 'Na zewnątrz',
  'Above': 'Powyżej',
  'Below': 'Poniżej',
  'Before': 'Przed',
  'After': 'Po',
  'During': 'Podczas',
  'While': 'Podczas gdy',
  'When': 'Kiedy',
  'Where': 'Gdzie',
  'How': 'Jak',
  'Why': 'Dlaczego',
  'What': 'Co',
  'Which': 'Który',
  'Who': 'Kto',
  'Whom': 'Kogo',
  'Whose': 'Czyj',

  // MQTT related
  'MQTT base topic for Zigbee2MQTT MQTT messages': 'Temat bazowy MQTT dla wiadomości MQTT Zigbee2MQTT',
  'MQTT server URL (use mqtts:// for SSL/TLS connection)': 'URL serwera MQTT (użyj mqtts:// dla połączenia SSL/TLS)',
  'MQTT keepalive in second': 'MQTT keepalive w sekundach',
  'MQTT server authentication user': 'Użytkownik uwierzytelniania serwera MQTT',
  'MQTT server authentication password': 'Hasło uwierzytelniania serwera MQTT',
  'MQTT client ID': 'ID klienta MQTT',
  'Include device information to mqtt messages': 'Dołącz informacje o urządzeniu do wiadomości MQTT',
  'MQTT protocol version': 'Wersja protokołu MQTT',

  // SSL/TLS related
  'Absolute path to SSL/TLS certificate of CA used to sign server and client certificates': 'Ścieżka bezwzględna do certyfikatu SSL/TLS CA używanego do podpisywania certyfikatów serwera i klienta',
  'Absolute path to SSL/TLS key for client-authentication': 'Ścieżka bezwzględna do klucza SSL/TLS dla uwierzytelniania klienta',
  'Absolute path to SSL/TLS certificate for client-authentication': 'Ścieżka bezwzględna do certyfikatu SSL/TLS dla uwierzytelniania klienta',

  // Device and network related
  'Options for passive devices (mostly battery powered)': 'Opcje dla urządzeń pasywnych (głównie zasilanych bateryjnie)',
  'Block devices from the network (by ieeeAddr)': 'Blokuj urządzenia z sieci (według ieeeAddr)',
  'RTS / CTS Hardware Flow Control for serial port': 'Kontrola przepływu sprzętowego RTS / CTS dla portu szeregowego',
  'Adapter type, not needed unless you are experiencing problems': 'Typ adaptera, niepotrzebny, chyba że występują problemy',
  'QoS level for MQTT messages of this device': 'Poziom QoS dla wiadomości MQTT tego urządzenia',
  'Debounces messages of this device': 'Debounce wiadomości tego urządzenia',
  'Protects unique payload values of specified payload properties from overriding within debounce time': 'Chroni unikalne wartości ładunku określonych właściwości ładunku przed nadpisaniem w czasie debounce',
  'Publish optimistic state after set': 'Publikuj optymistyczny stan po ustawieniu',
  'Name of the device in Home Assistant': 'Nazwa urządzenia w Home Assistant',
  'QoS level for MQTT messages of this group': 'Poziom QoS dla wiadomości MQTT tej grupy',

  // Settings descriptions that need translation but preserve product names
  'Home Assistant integration (MQTT discovery)': 'Integracja z Home Assistant (odkrywanie MQTT)',

  // Technical terms that are often left as product names but need context
  'Location of the adapter. To autodetect the port, set null': 'Lokalizacja adaptera. Aby automatycznie wykryć port, ustaw null',
  'Baud rate speed for the serial port. This must match what the firmware on your adapter supports (most commonly 115200).': 'Prędkość transmisji dla portu szeregowego. Musi odpowiadać temu, co obsługuje firmware adaptera (najczęściej 115200).',
  'Allow only certain devices to join the network (by ieeeAddr). Note that all devices not on the passlist will be removed from the network!': 'Zezwalaj tylko określonym urządzeniom na dołączenie do sieci (według ieeeAddr). Uwaga: wszystkie urządzenia nie znajdujące się na liście dozwolonych zostaną usunięte z sieci!',
  'Home Assistant legacy actions sensor, when enabled a action sensor will be discoverd and an empty `action` will be send after every published action.': 'Sensor starszych akcji Home Assistant, po włączeniu sensor akcji zostanie odkryty i pusta `akcja` będzie wysyłana po każdej opublikowanej akcji.',
  'Home Assistant experimental event entities, when enabled Zigbee2MQTT will add event entities for exposed actions. The events and attributes are currently deemed experimental and subject to change.': 'Eksperymentalne encje zdarzeń Home Assistant, po włączeniu Zigbee2MQTT doda encje zdarzeń dla eksponowanych akcji. Zdarzenia i atrybuty są obecnie uznawane za eksperymentalne i mogą ulec zmianie.',
  'Enable timeout backoff on failed availability pings (x1.5, x3, x6, x12...)': 'Włącz wycofywanie timeout przy nieudanych pingach dostępności (x1.5, x3, x6, x12...)',
  'Pause availability pings when backoff reaches over this limit until a new Zigbee message is received from the device. A value of zero disables pausing.': 'Wstrzymaj pingi dostępności, gdy wycofywanie przekroczy ten limit, aż do otrzymania nowej wiadomości Zigbee z urządzenia. Wartość zero wyłącza wstrzymywanie.',
  "Disable retain for all send messages. ONLY enable if your MQTT broker doesn't support retained message (e.g. AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Enabling will break the Home Assistant integration": "Wyłącz retain dla wszystkich wysyłanych wiadomości. Włącz TYLKO jeśli broker MQTT nie obsługuje wiadomości zachowanych (np. AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Włączenie spowoduje uszkodzenie integracji z Home Assistant",
  'Specifies the maximum allowed packet length (in bytes) that the server can send to Zigbee2MQTT. NOTE: The same value exists in your MQTT broker but for the length the client can send to it instead.': 'Określa maksymalną dozwoloną długość pakietu (w bajtach), którą serwer może wysłać do Zigbee2MQTT. UWAGA: Ta sama wartość istnieje w brokerze MQTT, ale dla długości, którą klient może do niego wysłać.',
  'Sets the MQTT Message Expiry in seconds, Make sure to set mqtt.version to 5': 'Ustawia wygaśnięcie wiadomości MQTT w sekundach, upewnij się, że ustawisz mqtt.version na 5',
  'The minimum time between payloads in seconds. Payloads received whilst the device is being throttled will be discarded': 'Minimalny czas między ładunkami w sekundach. Ładunki otrzymane podczas ograniczania urządzenia zostaną odrzucone',
  'Filter attributes with regex from published payload.': 'Filtruj atrybuty za pomocą regex z opublikowanego ładunku.',
  "Filter attributes with regex from being added to the cache, this prevents the attribute from being in the published payload when the value didn't change.": "Filtruj atrybuty za pomocą regex przed dodaniem do pamięci podręcznej, to zapobiega umieszczeniu atrybutu w opublikowanym ładunku, gdy wartość się nie zmieniła.",
  'Filter attributes with regex from optimistic publish payload when calling /set. (This has no effect if optimistic is set to false).': 'Filtruj atrybuty za pomocą regex z optymistycznego ładunku publikacji przy wywołaniu /set. (To nie ma efektu, jeśli optymistic jest ustawione na false).',
  'The user-defined device icon for the frontend. It can be a full URL link to an image (e.g. https://SOME.SITE/MODEL123.jpg) or a path to a local file inside the `device_icons` directory (e.g. device_icons/MODEL123.png).': 'Ikona urządzenia definiowana przez użytkownika dla interfejsu. Może to być pełny link URL do obrazu (np. https://SOME.SITE/MODEL123.jpg) lub ścieżka do lokalnego pliku w katalogu `device_icons` (np. device_icons/MODEL123.png).',
  "Control when to publish state OFF or CLOSE for a group. 'all_members_off': only publish state OFF/CLOSE when all group members are in state OFF/CLOSE,  'last_member_state': publish state OFF whenever one of its members changes to OFF": "Kontroluj, kiedy publikować stan OFF lub CLOSE dla grupy. 'all_members_off': publikuj stan OFF/CLOSE tylko wtedy, gdy wszyscy członkowie grupy są w stanie OFF/CLOSE, 'last_member_state': publikuj stan OFF, gdy jeden z jego członków zmieni się na OFF"
};

function shouldSkipTranslation(text) {
  if (!text || typeof text !== 'string') return true;
  return PRODUCT_NAMES.some(productName => text.includes(productName));
}

function translateText(text) {
  if (shouldSkipTranslation(text)) return text;
  return POLISH_TRANSLATIONS[text] || text;
}

// Filter untranslated entries for Polish
const polishEntries = untranslated.filter(entry => entry.file === 'pl.json');

if (polishEntries.length === 0) {
  console.log('No untranslated entries found for Polish (pl.json)');
  process.exit(0);
}

console.log(`Found ${polishEntries.length} untranslated entries for Polish`);

// Load Polish locale file
const polishPath = './src/i18n/locales/pl.json';
const polishLocale = JSON.parse(readFileSync(polishPath, 'utf8'));

let translatedCount = 0;

// Apply translations
for (const entry of polishEntries) {
  const translation = translateText(entry.value);
  if (translation !== entry.value) {
    set(polishLocale, entry.path, translation);
    translatedCount++;
    console.log(`Translated: ${entry.path} = "${translation}"`);
  }
}

// Write back to file
writeFileSync(polishPath, JSON.stringify(polishLocale, null, 2) + '\n');

console.log(`Successfully translated ${translatedCount} entries for Polish`);
console.log(`Polish translation file updated: ${polishPath}`);