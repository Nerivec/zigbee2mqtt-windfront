#!/usr/bin/env node

import { readFileSync, writeFileSync } from 'fs';
import set from 'lodash/set.js';
import untranslated from './find-untranslated.mjs';

// Product names that should remain in English
const PRODUCT_NAMES = [
   'Zigbee2MQTT', 'zigbee2mqtt', 'Home Assistant', 'MQTT', 'WebSocket', 'SSL/TLS', 
   'IEEE', 'LQI', 'RSSI', 'Z-Stack', 'CoordinatorBackup', 'DeconzBackup', 
   'ZStackBackup', 'OTAU', 'EZSP', 'OTA', 'Hue', 'IKEA', 'Xiaomi', 'Aqara',
   'GitHub', 'JSON', 'HTTP', 'HTTPS', 'API', 'URL', 'TCP', 'UDP', 'Wi-Fi',
   'ZHA', 'deCONZ', 'ConBee', 'CC2531', 'CC2538', 'CC2652', 'CC1352',
   'ZNP', 'ZNVP', 'ZnV', 'zStack', 'EmberZNet', 'SiLabs', 'ConBee II',
   'Z2M', 'BSD', 'PID', 'syslogd', 'OS X', 'QoS', 'USB', 'npm', 'yarn',
   'localhost', 'unix', 'tcp4', 'udp4', 'tls4', 'AWS IoT', 'Azure IoT Hub',
   'Google Cloud IoT', 'IBM Watson IoT', 'GreenPower'
];

// Comprehensive Russian translation dictionary
const RUSSIAN_TRANSLATIONS = {
  // Common UI terms
  'Loading...': 'Загрузка...',
  'Token': 'Токен',
  'Nodes': 'Узлы',
  'Extensions': 'Расширения',
  'Firmware version': 'Версия прошивки',
  'App': 'Приложение',
  'Stack': 'Стек',
  'Blocklist': 'Чёрный список',
  'Revision': 'Ревизия',
  'Donate': 'Пожертвовать',
  'Experimental': 'Экспериментальное',
  'Frontend': 'Интерфейс',
  'Frontend version': 'Версия интерфейса',
  'Main': 'Основное',
  'OTA updates': 'Обновления OTA',
  'Passlist': 'Белый список',
  'Serial': 'Последовательный',
  'Tools': 'Инструменты',
  'Translate': 'Перевести',
  'Stats': 'Статистика',
  'Home Assistant integration': 'Интеграция с Home Assistant',
  'zigbee-herdsman-converters version': 'Версия zigbee-herdsman-converters',
  'zigbee-herdsman version': 'Версия zigbee-herdsman',
  'Models': 'Модели',
  'Total': 'Всего',
  'Unknown': 'Неизвестно',
  'Unknown device': 'Неизвестное устройство',
  'Friendly name': 'Дружественное имя',
  'Model': 'Модель',
  'Icon': 'Иконка',
  'Last seen': 'Последний раз видели',
  'Status': 'Статус',
  'Available': 'Доступно',
  'Unavailable': 'Недоступно',
  'Supported': 'Поддерживается',
  'Not supported': 'Не поддерживается',
  'Definition': 'Определение',
  'Remove': 'Удалить',
  'Save': 'Сохранить',
  'Cancel': 'Отменить',
  'Add': 'Добавить',
  'Edit': 'Редактировать',
  'Delete': 'Удалить',
  'Close': 'Закрыть',
  'Open': 'Открыть',
  'Settings': 'Настройки',
  'Options': 'Параметры',
  'Actions': 'Действия',
  'Properties': 'Свойства',
  'Value': 'Значение',
  'Type': 'Тип',
  'Description': 'Описание',
  'Default': 'По умолчанию',
  'Required': 'Обязательно',
  'Optional': 'Необязательно',
  'Enable': 'Включить',
  'Disable': 'Отключить',
  'Enabled': 'Включено',
  'Disabled': 'Отключено',
  'Apply': 'Применить',
  'Reset': 'Сбросить',
  'Clear': 'Очистить',
  'Refresh': 'Обновить',
  'Update': 'Обновить',
  'Install': 'Установить',
  'Uninstall': 'Удалить',
  'Start': 'Запустить',
  'Stop': 'Остановить',
  'Restart': 'Перезапустить',
  'Pause': 'Пауза',
  'Resume': 'Возобновить',
  'Connect': 'Подключить',
  'Disconnect': 'Отключить',
  'Online': 'Онлайн',
  'Offline': 'Офлайн',
  'Connected': 'Подключено',
  'Disconnected': 'Отключено',
  'On': 'Включено',
  'Off': 'Выключено',
  'Yes': 'Да',
  'No': 'Нет',
  'True': 'Истина',
  'False': 'Ложь',
  'None': 'Нет',
  'All': 'Все',
  'Any': 'Любой',
  'Auto': 'Автоматически',
  'Manual': 'Вручную',
  'Custom': 'Пользовательский',
  'Advanced': 'Расширенные',
  'Basic': 'Основные',
  'Simple': 'Простой',
  'Complex': 'Сложный',
  'High': 'Высокий',
  'Medium': 'Средний',
  'Low': 'Низкий',
  'Fast': 'Быстро',
  'Slow': 'Медленно',
  'Normal': 'Нормальный',
  'Warning': 'Предупреждение',
  'Error': 'Ошибка',
  'Info': 'Информация',
  'Success': 'Успех',
  'Failed': 'Неудача',
  'Pending': 'В ожидании',
  'Complete': 'Завершено',
  'Active': 'Активный',
  'Inactive': 'Неактивный',
  'Ready': 'Готов',
  'Busy': 'Занят',
  'Idle': 'Бездействие',
  'Running': 'Выполняется',
  'Stopped': 'Остановлено',
  'Paused': 'Приостановлено',
  'Loading': 'Загрузка',
  'Saving': 'Сохранение',
  'Updating': 'Обновление',
  'Processing': 'Обработка',
  'Searching': 'Поиск',
  'Found': 'Найдено',
  'Not found': 'Не найдено',
  'Empty': 'Пусто',
  'Full': 'Полный',
  'Valid': 'Действительный',
  'Invalid': 'Недействительный',
  'Available updates': 'Доступные обновления',
  'No updates available': 'Нет доступных обновлений',
  'Check for updates': 'Проверить обновления',
  'Download': 'Скачать',
  'Upload': 'Загрузить',
  'Import': 'Импортировать',
  'Export': 'Экспортировать',
  'Backup': 'Резервная копия',
  'Restore': 'Восстановить',
  'Copy': 'Копировать',
  'Paste': 'Вставить',
  'Cut': 'Вырезать',
  'Duplicate': 'Дублировать',
  'Move': 'Переместить',
  'Rename': 'Переименовать',
  'Create': 'Создать',
  'Generate': 'Сгенерировать',
  'Build': 'Собрать',
  'Compile': 'Компилировать',
  'Execute': 'Выполнить',
  'Run': 'Запустить',
  'Test': 'Тестировать',
  'Debug': 'Отладка',
  'Monitor': 'Мониторинг',
  'Track': 'Отслеживать',
  'Log': 'Журнал',
  'Report': 'Отчёт',
  'Chart': 'График',
  'Graph': 'График',
  'Table': 'Таблица',
  'List': 'Список',
  'Grid': 'Сетка',
  'Tree': 'Дерево',
  'Map': 'Карта',
  'View': 'Вид',
  'Show': 'Показать',
  'Hide': 'Скрыть',
  'Expand': 'Развернуть',
  'Collapse': 'Свернуть',
  'Minimize': 'Минимизировать',
  'Maximize': 'Максимизировать',
  'Fullscreen': 'Полный экран',
  'Exit fullscreen': 'Выйти из полного экрана',
  'Next': 'Следующий',
  'Previous': 'Предыдущий',
  'First': 'Первый',
  'Last': 'Последний',
  'Page': 'Страница',
  'Pages': 'Страницы',
  'Item': 'Элемент',
  'Items': 'Элементы',
  'Row': 'Строка',
  'Rows': 'Строки',
  'Column': 'Столбец',
  'Columns': 'Столбцы',
  'Field': 'Поле',
  'Fields': 'Поля',
  'Name': 'Имя',
  'Address': 'Адрес',
  'Port': 'Порт',
  'Path': 'Путь',
  'File': 'Файл',
  'Files': 'Файлы',
  'Folder': 'Папка',
  'Folders': 'Папки',
  'Directory': 'Директория',
  'Directories': 'Директории',
  'Location': 'Расположение',
  'Position': 'Позиция',
  'Coordinates': 'Координаты',
  'Size': 'Размер',
  'Length': 'Длина',
  'Width': 'Ширина',
  'Height': 'Высота',
  'Depth': 'Глубина',
  'Weight': 'Вес',
  'Volume': 'Объём',
  'Speed': 'Скорость',
  'Rate': 'Частота',
  'Frequency': 'Частота',
  'Duration': 'Продолжительность',
  'Timeout': 'Таймаут',
  'Delay': 'Задержка',
  'Interval': 'Интервал',
  'Period': 'Период',
  'Cycle': 'Цикл',
  'Count': 'Количество',
  'Number': 'Номер',
  'Amount': 'Количество',
  'Quantity': 'Количество',
  'Limit': 'Лимит',
  'Maximum': 'Максимум',
  'Minimum': 'Минимум',
  'Range': 'Диапазон',
  'Scale': 'Масштаб',
  'Level': 'Уровень',
  'Degree': 'Степень',
  'Percentage': 'Процент',
  'Ratio': 'Соотношение',
  'Version': 'Версия',
  'Release': 'Релиз',
  'Build': 'Сборка',
  'Edition': 'Издание',
  'Update': 'Обновление',
  'Upgrade': 'Обновление',
  'Downgrade': 'Понижение версии',
  'Install': 'Установка',
  'Uninstall': 'Удаление',
  'Setup': 'Настройка',
  'Configuration': 'Конфигурация',
  'Settings': 'Настройки',
  'Preferences': 'Предпочтения',
  'Options': 'Параметры',
  'Parameters': 'Параметры',
  'Arguments': 'Аргументы',
  'Variables': 'Переменные',
  'Constants': 'Константы',
  'Properties': 'Свойства',
  'Attributes': 'Атрибуты',
  'Features': 'Возможности',
  'Capabilities': 'Возможности',
  'Functions': 'Функции',
  'Methods': 'Методы',
  'Commands': 'Команды',
  'Operations': 'Операции',
  'Procedures': 'Процедуры',
  'Processes': 'Процессы',
  'Tasks': 'Задачи',
  'Jobs': 'Задания',
  'Services': 'Сервисы',
  'Resources': 'Ресурсы',
  'Components': 'Компоненты',
  'Modules': 'Модули',
  'Plugins': 'Плагины',
  'Extensions': 'Расширения',
  'Add-ons': 'Дополнения',
  'Packages': 'Пакеты',
  'Libraries': 'Библиотеки',
  'Frameworks': 'Фреймворки',
  'Platforms': 'Платформы',
  'Systems': 'Системы',
  'Applications': 'Приложения',
  'Programs': 'Программы',
  'Software': 'Программное обеспечение',
  'Hardware': 'Аппаратное обеспечение',
  'Firmware': 'Прошивка',
  'Driver': 'Драйвер',
  'Drivers': 'Драйверы',
  'Device': 'Устройство',
  'Devices': 'Устройства',
  'Equipment': 'Оборудование',
  'Tool': 'Инструмент',
  'Tools': 'Инструменты',
  'Utility': 'Утилита',
  'Utilities': 'Утилиты',
  'Helper': 'Помощник',
  'Helpers': 'Помощники',
  'Assistant': 'Помощник',
  'Assistants': 'Помощники',
  'Agent': 'Агент',
  'Agents': 'Агенты',
  'Client': 'Клиент',
  'Clients': 'Клиенты',
  'Server': 'Сервер',
  'Servers': 'Серверы',
  'Host': 'Хост',
  'Hosts': 'Хосты',
  'Node': 'Узел',
  'Nodes': 'Узлы',
  'Network': 'Сеть',
  'Networks': 'Сети',
  'Connection': 'Соединение',
  'Connections': 'Соединения',
  'Link': 'Ссылка',
  'Links': 'Ссылки',
  'Route': 'Маршрут',
  'Routes': 'Маршруты',
  'Path': 'Путь',
  'Paths': 'Пути',
  'Channel': 'Канал',
  'Channels': 'Каналы',
  'Port': 'Порт',
  'Ports': 'Порты',
  'Interface': 'Интерфейс',
  'Interfaces': 'Интерфейсы',
  'Protocol': 'Протокол',
  'Protocols': 'Протоколы',
  'Service': 'Сервис',
  'Services': 'Сервисы',
  'API': 'API',
  'APIs': 'API',
  'Endpoint': 'Конечная точка',
  'Endpoints': 'Конечные точки',
  'Method': 'Метод',
  'Methods': 'Методы',
  'Request': 'Запрос',
  'Requests': 'Запросы',
  'Response': 'Ответ',
  'Responses': 'Ответы',
  'Message': 'Сообщение',
  'Messages': 'Сообщения',
  'Event': 'Событие',
  'Events': 'События',
  'Signal': 'Сигнал',
  'Signals': 'Сигналы',
  'Notification': 'Уведомление',
  'Notifications': 'Уведомления',
  'Alert': 'Предупреждение',
  'Alerts': 'Предупреждения',
  'Warning': 'Предупреждение',
  'Warnings': 'Предупреждения',
  'Error': 'Ошибка',
  'Errors': 'Ошибки',
  'Exception': 'Исключение',
  'Exceptions': 'Исключения',
  'Fault': 'Сбой',
  'Faults': 'Сбои',
  'Issue': 'Проблема',
  'Issues': 'Проблемы',
  'Problem': 'Проблема',
  'Problems': 'Проблемы',
  'Bug': 'Ошибка',
  'Bugs': 'Ошибки',
  'Fix': 'Исправление',
  'Fixes': 'Исправления',
  'Solution': 'Решение',
  'Solutions': 'Решения',
  'Resolution': 'Разрешение',
  'Resolutions': 'Разрешения',
  'Workaround': 'Обходной путь',
  'Workarounds': 'Обходные пути',
  'Improvement': 'Улучшение',
  'Improvements': 'Улучшения',
  'Enhancement': 'Улучшение',
  'Enhancements': 'Улучшения',
  'Feature': 'Функция',
  'Features': 'Функции',
  'Function': 'Функция',
  'Functions': 'Функции',
  'Capability': 'Возможность',
  'Capabilities': 'Возможности',
  'Ability': 'Способность',
  'Abilities': 'Способности',
  'Skill': 'Навык',
  'Skills': 'Навыки',
  'Knowledge': 'Знания',
  'Information': 'Информация',
  'Data': 'Данные',
  'Content': 'Содержимое',
  'Text': 'Текст',
  'String': 'Строка',
  'Number': 'Число',
  'Integer': 'Целое число',
  'Float': 'Число с плавающей точкой',
  'Boolean': 'Логическое значение',
  'Array': 'Массив',
  'Object': 'Объект',
  'List': 'Список',
  'Map': 'Карта',
  'Set': 'Множество',
  'Collection': 'Коллекция',
  'Group': 'Группа',
  'Category': 'Категория',
  'Class': 'Класс',
  'Type': 'Тип',
  'Kind': 'Вид',
  'Sort': 'Сортировка',
  'Order': 'Порядок',
  'Sequence': 'Последовательность',
  'Series': 'Серия',
  'Chain': 'Цепь',
  'Queue': 'Очередь',
  'Stack': 'Стек',
  'Buffer': 'Буфер',
  'Cache': 'Кэш',
  'Memory': 'Память',
  'Storage': 'Хранилище',
  'Database': 'База данных',
  'Repository': 'Репозиторий',
  'Archive': 'Архив',
  'History': 'История',
  'Log': 'Журнал',
  'Record': 'Запись',
  'Entry': 'Запись',
  'Item': 'Элемент',
  'Element': 'Элемент',
  'Component': 'Компонент',
  'Part': 'Часть',
  'Piece': 'Часть',
  'Fragment': 'Фрагмент',
  'Section': 'Раздел',
  'Chapter': 'Глава',
  'Page': 'Страница',
  'Document': 'Документ',
  'File': 'Файл',
  'Folder': 'Папка',
  'Directory': 'Директория',
  'Path': 'Путь',
  'Location': 'Расположение',
  'Position': 'Позиция',
  'Place': 'Место',
  'Area': 'Область',
  'Region': 'Регион',
  'Zone': 'Зона',
  'Territory': 'Территория',
  'Domain': 'Домен',
  'Realm': 'Область',
  'Scope': 'Область',
  'Range': 'Диапазон',
  'Span': 'Промежуток',
  'Extent': 'Протяжённость',
  'Boundary': 'Граница',
  'Limit': 'Лимит',
  'Threshold': 'Порог',
  'Margin': 'Поле',
  'Border': 'Граница',
  'Edge': 'Край',
  'Corner': 'Угол',
  'Side': 'Сторона',
  'Top': 'Верх',
  'Bottom': 'Низ',
  'Left': 'Лево',
  'Right': 'Право',
  'Center': 'Центр',
  'Middle': 'Середина',
  'Front': 'Перед',
  'Back': 'Назад',
  'Inside': 'Внутри',
  'Outside': 'Снаружи',
  'Above': 'Выше',
  'Below': 'Ниже',
  'Before': 'До',
  'After': 'После',
  'During': 'Во время',
  'While': 'Пока',
  'When': 'Когда',
  'Where': 'Где',
  'How': 'Как',
  'Why': 'Почему',
  'What': 'Что',
  'Which': 'Который',
  'Who': 'Кто',
  'Whom': 'Кого',
  'Whose': 'Чей',

  // MQTT related
  'MQTT base topic for Zigbee2MQTT MQTT messages': 'Базовый топик MQTT для сообщений MQTT Zigbee2MQTT',
  'MQTT server URL (use mqtts:// for SSL/TLS connection)': 'URL сервера MQTT (используйте mqtts:// для соединения SSL/TLS)',
  'MQTT keepalive in second': 'MQTT keepalive в секундах',
  'MQTT server authentication user': 'Пользователь аутентификации сервера MQTT',
  'MQTT server authentication password': 'Пароль аутентификации сервера MQTT',
  'MQTT client ID': 'ID клиента MQTT',
  'Include device information to mqtt messages': 'Включать информацию об устройстве в сообщения MQTT',
  'MQTT protocol version': 'Версия протокола MQTT',

  // SSL/TLS related
  'Absolute path to SSL/TLS certificate of CA used to sign server and client certificates': 'Абсолютный путь к сертификату SSL/TLS CA, используемому для подписи сертификатов сервера и клиента',
  'Absolute path to SSL/TLS key for client-authentication': 'Абсолютный путь к ключу SSL/TLS для аутентификации клиента',
  'Absolute path to SSL/TLS certificate for client-authentication': 'Абсолютный путь к сертификату SSL/TLS для аутентификации клиента',

  // Device and network related
  'Options for passive devices (mostly battery powered)': 'Параметры для пассивных устройств (в основном на батарейках)',
  'Block devices from the network (by ieeeAddr)': 'Блокировать устройства из сети (по ieeeAddr)',
  'RTS / CTS Hardware Flow Control for serial port': 'Аппаратное управление потоком RTS / CTS для последовательного порта',
  'Adapter type, not needed unless you are experiencing problems': 'Тип адаптера, не нужен, если у вас нет проблем',
  'QoS level for MQTT messages of this device': 'Уровень QoS для сообщений MQTT этого устройства',
  'Debounces messages of this device': 'Антидребезг сообщений этого устройства',
  'Protects unique payload values of specified payload properties from overriding within debounce time': 'Защищает уникальные значения полезной нагрузки указанных свойств от перезаписи в течение времени антидребезга',
  'Publish optimistic state after set': 'Публиковать оптимистичное состояние после установки',
  'Name of the device in Home Assistant': 'Имя устройства в Home Assistant',
  'QoS level for MQTT messages of this group': 'Уровень QoS для сообщений MQTT этой группы',

  // Settings descriptions that need translation but preserve product names
  'Home Assistant integration (MQTT discovery)': 'Интеграция с Home Assistant (обнаружение MQTT)',

  // Technical terms that are often left as product names but need context
  'Location of the adapter. To autodetect the port, set null': 'Расположение адаптера. Для автоопределения порта установите null',
  'Baud rate speed for the serial port. This must match what the firmware on your adapter supports (most commonly 115200).': 'Скорость передачи данных для последовательного порта. Это должно соответствовать тому, что поддерживает прошивка вашего адаптера (чаще всего 115200).',
  'Allow only certain devices to join the network (by ieeeAddr). Note that all devices not on the passlist will be removed from the network!': 'Разрешить только определённым устройствам присоединяться к сети (по ieeeAddr). Обратите внимание, что все устройства, не находящиеся в белом списке, будут удалены из сети!',
  'Home Assistant legacy actions sensor, when enabled a action sensor will be discoverd and an empty `action` will be send after every published action.': 'Сенсор устаревших действий Home Assistant, при включении будет обнаружен сенсор действий и пустое `действие` будет отправлено после каждого опубликованного действия.',
  'Home Assistant experimental event entities, when enabled Zigbee2MQTT will add event entities for exposed actions. The events and attributes are currently deemed experimental and subject to change.': 'Экспериментальные сущности событий Home Assistant, при включении Zigbee2MQTT добавит сущности событий для открытых действий. События и атрибуты в настоящее время считаются экспериментальными и могут измениться.',
  'Enable timeout backoff on failed availability pings (x1.5, x3, x6, x12...)': 'Включить откат по таймауту при неудачных пингах доступности (x1.5, x3, x6, x12...)',
  'Pause availability pings when backoff reaches over this limit until a new Zigbee message is received from the device. A value of zero disables pausing.': 'Приостановить пинги доступности, когда откат превышает этот лимит, до получения нового сообщения Zigbee от устройства. Значение ноль отключает приостановку.',
  "Disable retain for all send messages. ONLY enable if your MQTT broker doesn't support retained message (e.g. AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Enabling will break the Home Assistant integration": "Отключить retain для всех отправляемых сообщений. Включайте ТОЛЬКО если ваш брокер MQTT не поддерживает сохранённые сообщения (например, AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Включение нарушит интеграцию с Home Assistant",
  'Specifies the maximum allowed packet length (in bytes) that the server can send to Zigbee2MQTT. NOTE: The same value exists in your MQTT broker but for the length the client can send to it instead.': 'Указывает максимально допустимую длину пакета (в байтах), которую сервер может отправить в Zigbee2MQTT. ПРИМЕЧАНИЕ: То же значение существует в вашем брокере MQTT, но для длины, которую клиент может отправить ему.',
  'Sets the MQTT Message Expiry in seconds, Make sure to set mqtt.version to 5': 'Устанавливает срок истечения сообщения MQTT в секундах, убедитесь, что установили mqtt.version в 5',
  'The minimum time between payloads in seconds. Payloads received whilst the device is being throttled will be discarded': 'Минимальное время между полезными нагрузками в секундах. Полезные нагрузки, полученные во время ограничения устройства, будут отброшены',
  'Filter attributes with regex from published payload.': 'Фильтровать атрибуты с помощью regex из опубликованной полезной нагрузки.',
  "Filter attributes with regex from being added to the cache, this prevents the attribute from being in the published payload when the value didn't change.": "Фильтровать атрибуты с помощью regex от добавления в кэш, это предотвращает попадание атрибута в опубликованную полезную нагрузку, когда значение не изменилось.",
  'Filter attributes with regex from optimistic publish payload when calling /set. (This has no effect if optimistic is set to false).': 'Фильтровать атрибуты с помощью regex из оптимистичной полезной нагрузки при вызове /set. (Это не имеет эффекта, если optimistic установлено в false).',
  'The user-defined device icon for the frontend. It can be a full URL link to an image (e.g. https://SOME.SITE/MODEL123.jpg) or a path to a local file inside the `device_icons` directory (e.g. device_icons/MODEL123.png).': 'Пользовательская иконка устройства для интерфейса. Это может быть полная URL-ссылка на изображение (например, https://SOME.SITE/MODEL123.jpg) или путь к локальному файлу в директории `device_icons` (например, device_icons/MODEL123.png).',
  "Control when to publish state OFF or CLOSE for a group. 'all_members_off': only publish state OFF/CLOSE when all group members are in state OFF/CLOSE,  'last_member_state': publish state OFF whenever one of its members changes to OFF": "Контролировать, когда публиковать состояние OFF или CLOSE для группы. 'all_members_off': публиковать состояние OFF/CLOSE только когда все члены группы в состоянии OFF/CLOSE, 'last_member_state': публиковать состояние OFF всякий раз, когда один из его членов меняется на OFF"
};

function shouldSkipTranslation(text) {
  if (!text || typeof text !== 'string') return true;
  return PRODUCT_NAMES.some(productName => text.includes(productName));
}

function translateText(text) {
  if (shouldSkipTranslation(text)) return text;
  return RUSSIAN_TRANSLATIONS[text] || text;
}

// Filter untranslated entries for Russian
const russianEntries = untranslated.filter(entry => entry.file === 'ru.json');

if (russianEntries.length === 0) {
  console.log('No untranslated entries found for Russian (ru.json)');
  process.exit(0);
}

console.log(`Found ${russianEntries.length} untranslated entries for Russian`);

// Load Russian locale file
const russianPath = './src/i18n/locales/ru.json';
const russianLocale = JSON.parse(readFileSync(russianPath, 'utf8'));

let translatedCount = 0;

// Apply translations
for (const entry of russianEntries) {
  const translation = translateText(entry.value);
  if (translation !== entry.value) {
    set(russianLocale, entry.path, translation);
    translatedCount++;
    console.log(`Translated: ${entry.path} = "${translation}"`);
  }
}

// Write back to file
writeFileSync(russianPath, JSON.stringify(russianLocale, null, 2) + '\n');

console.log(`Successfully translated ${translatedCount} entries for Russian`);
console.log(`Russian translation file updated: ${russianPath}`);