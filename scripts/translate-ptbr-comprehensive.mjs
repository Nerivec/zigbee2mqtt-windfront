#!/usr/bin/env node

import { readFileSync, writeFileSync } from 'fs';
import set from 'lodash/set.js';
import untranslated from './find-untranslated.mjs';

// Product names that should remain in English
const PRODUCT_NAMES = [
   'Zigbee2MQTT', 'zigbee2mqtt', 'Home Assistant', 'MQTT', 'WebSocket', 'SSL/TLS', 
   'IEEE', 'LQI', 'RSSI', 'Z-Stack', 'CoordinatorBackup', 'DeconzBackup', 
   'ZStackBackup', 'OTAU', 'EZSP', 'OTA', 'Hue', 'IKEA', 'Xiaomi', 'Aqara',
   'GitHub', 'JSON', 'HTTP', 'HTTPS', 'API', 'URL', 'TCP', 'UDP', 'Wi-Fi',
   'ZHA', 'deCONZ', 'ConBee', 'CC2531', 'CC2538', 'CC2652', 'CC1352',
   'ZNP', 'ZNVP', 'ZnV', 'zStack', 'EmberZNet', 'SiLabs', 'ConBee II',
   'Z2M', 'BSD', 'PID', 'syslogd', 'OS X', 'QoS', 'USB', 'npm', 'yarn',
   'localhost', 'unix', 'tcp4', 'udp4', 'tls4', 'AWS IoT', 'Azure IoT Hub',
   'Google Cloud IoT', 'IBM Watson IoT', 'GreenPower'
];

// Comprehensive Portuguese Brazilian translation dictionary
const PORTUGUESE_TRANSLATIONS = {
  // Common UI terms
  'Loading...': 'Carregando...',
  'Token': 'Token',
  'Nodes': 'Nós',
  'Extensions': 'Extensões',
  'Firmware version': 'Versão do firmware',
  'App': 'Aplicativo',
  'Stack': 'Pilha',
  'Blocklist': 'Lista de bloqueio',
  'Revision': 'Revisão',
  'Donate': 'Doar',
  'Experimental': 'Experimental',
  'Frontend': 'Interface',
  'Frontend version': 'Versão da interface',
  'Main': 'Principal',
  'OTA updates': 'Atualizações OTA',
  'Passlist': 'Lista de permitidos',
  'Serial': 'Serial',
  'Tools': 'Ferramentas',
  'Translate': 'Traduzir',
  'Stats': 'Estatísticas',
  'Home Assistant integration': 'Integração com Home Assistant',
  'zigbee-herdsman-converters version': 'Versão do zigbee-herdsman-converters',
  'zigbee-herdsman version': 'Versão do zigbee-herdsman',
  'Models': 'Modelos',
  'Total': 'Total',
  'Unknown': 'Desconhecido',
  'Unknown device': 'Dispositivo desconhecido',
  'Friendly name': 'Nome amigável',
  'Model': 'Modelo',
  'Icon': 'Ícone',
  'Last seen': 'Visto pela última vez',
  'Status': 'Status',
  'Available': 'Disponível',
  'Unavailable': 'Indisponível',
  'Supported': 'Suportado',
  'Not supported': 'Não suportado',
  'Definition': 'Definição',
  'Remove': 'Remover',
  'Save': 'Salvar',
  'Cancel': 'Cancelar',
  'Add': 'Adicionar',
  'Edit': 'Editar',
  'Delete': 'Excluir',
  'Close': 'Fechar',
  'Open': 'Abrir',
  'Settings': 'Configurações',
  'Options': 'Opções',
  'Actions': 'Ações',
  'Properties': 'Propriedades',
  'Value': 'Valor',
  'Type': 'Tipo',
  'Description': 'Descrição',
  'Default': 'Padrão',
  'Required': 'Obrigatório',
  'Optional': 'Opcional',
  'Enable': 'Habilitar',
  'Disable': 'Desabilitar',
  'Enabled': 'Habilitado',
  'Disabled': 'Desabilitado',
  'Apply': 'Aplicar',
  'Reset': 'Redefinir',
  'Clear': 'Limpar',
  'Refresh': 'Atualizar',
  'Update': 'Atualizar',
  'Install': 'Instalar',
  'Uninstall': 'Desinstalar',
  'Start': 'Iniciar',
  'Stop': 'Parar',
  'Restart': 'Reiniciar',
  'Pause': 'Pausar',
  'Resume': 'Retomar',
  'Connect': 'Conectar',
  'Disconnect': 'Desconectar',
  'Online': 'Online',
  'Offline': 'Offline',
  'Connected': 'Conectado',
  'Disconnected': 'Desconectado',
  'On': 'Ligado',
  'Off': 'Desligado',
  'Yes': 'Sim',
  'No': 'Não',
  'True': 'Verdadeiro',
  'False': 'Falso',
  'None': 'Nenhum',
  'All': 'Todos',
  'Any': 'Qualquer',
  'Auto': 'Automático',
  'Manual': 'Manual',
  'Custom': 'Personalizado',
  'Advanced': 'Avançado',
  'Basic': 'Básico',
  'Simple': 'Simples',
  'Complex': 'Complexo',
  'High': 'Alto',
  'Medium': 'Médio',
  'Low': 'Baixo',
  'Fast': 'Rápido',
  'Slow': 'Lento',
  'Normal': 'Normal',
  'Warning': 'Aviso',
  'Error': 'Erro',
  'Info': 'Informação',
  'Success': 'Sucesso',
  'Failed': 'Falhou',
  'Pending': 'Pendente',
  'Complete': 'Completo',
  'Active': 'Ativo',
  'Inactive': 'Inativo',
  'Ready': 'Pronto',
  'Busy': 'Ocupado',
  'Idle': 'Inativo',
  'Running': 'Executando',
  'Stopped': 'Parado',
  'Paused': 'Pausado',
  'Loading': 'Carregando',
  'Saving': 'Salvando',
  'Updating': 'Atualizando',
  'Processing': 'Processando',
  'Searching': 'Pesquisando',
  'Found': 'Encontrado',
  'Not found': 'Não encontrado',
  'Empty': 'Vazio',
  'Full': 'Cheio',
  'Valid': 'Válido',
  'Invalid': 'Inválido',
  'Available updates': 'Atualizações disponíveis',
  'No updates available': 'Nenhuma atualização disponível',
  'Check for updates': 'Verificar atualizações',
  'Download': 'Baixar',
  'Upload': 'Enviar',
  'Import': 'Importar',
  'Export': 'Exportar',
  'Backup': 'Backup',
  'Restore': 'Restaurar',
  'Copy': 'Copiar',
  'Paste': 'Colar',
  'Cut': 'Recortar',
  'Duplicate': 'Duplicar',
  'Move': 'Mover',
  'Rename': 'Renomear',
  'Create': 'Criar',
  'Generate': 'Gerar',
  'Build': 'Construir',
  'Compile': 'Compilar',
  'Execute': 'Executar',
  'Run': 'Executar',
  'Test': 'Testar',
  'Debug': 'Depurar',
  'Monitor': 'Monitorar',
  'Track': 'Rastrear',
  'Log': 'Log',
  'Report': 'Relatório',
  'Chart': 'Gráfico',
  'Graph': 'Gráfico',
  'Table': 'Tabela',
  'List': 'Lista',
  'Grid': 'Grade',
  'Tree': 'Árvore',
  'Map': 'Mapa',
  'View': 'Visualizar',
  'Show': 'Mostrar',
  'Hide': 'Ocultar',
  'Expand': 'Expandir',
  'Collapse': 'Recolher',
  'Minimize': 'Minimizar',
  'Maximize': 'Maximizar',
  'Fullscreen': 'Tela cheia',
  'Exit fullscreen': 'Sair da tela cheia',
  'Next': 'Próximo',
  'Previous': 'Anterior',
  'First': 'Primeiro',
  'Last': 'Último',
  'Page': 'Página',
  'Pages': 'Páginas',
  'Item': 'Item',
  'Items': 'Itens',
  'Row': 'Linha',
  'Rows': 'Linhas',
  'Column': 'Coluna',
  'Columns': 'Colunas',
  'Field': 'Campo',
  'Fields': 'Campos',
  'Name': 'Nome',
  'Address': 'Endereço',
  'Port': 'Porta',
  'Path': 'Caminho',
  'File': 'Arquivo',
  'Files': 'Arquivos',
  'Folder': 'Pasta',
  'Folders': 'Pastas',
  'Directory': 'Diretório',
  'Directories': 'Diretórios',
  'Location': 'Localização',
  'Position': 'Posição',
  'Coordinates': 'Coordenadas',
  'Size': 'Tamanho',
  'Length': 'Comprimento',
  'Width': 'Largura',
  'Height': 'Altura',
  'Depth': 'Profundidade',
  'Weight': 'Peso',
  'Volume': 'Volume',
  'Speed': 'Velocidade',
  'Rate': 'Taxa',
  'Frequency': 'Frequência',
  'Duration': 'Duração',
  'Timeout': 'Tempo limite',
  'Delay': 'Atraso',
  'Interval': 'Intervalo',
  'Period': 'Período',
  'Cycle': 'Ciclo',
  'Count': 'Contagem',
  'Number': 'Número',
  'Amount': 'Quantidade',
  'Quantity': 'Quantidade',
  'Limit': 'Limite',
  'Maximum': 'Máximo',
  'Minimum': 'Mínimo',
  'Range': 'Intervalo',
  'Scale': 'Escala',
  'Level': 'Nível',
  'Degree': 'Grau',
  'Percentage': 'Porcentagem',
  'Ratio': 'Proporção',
  'Version': 'Versão',
  'Release': 'Lançamento',
  'Build': 'Compilação',
  'Edition': 'Edição',
  'Update': 'Atualização',
  'Upgrade': 'Atualização',
  'Downgrade': 'Rebaixamento',
  'Install': 'Instalação',
  'Uninstall': 'Desinstalação',
  'Setup': 'Configuração',
  'Configuration': 'Configuração',
  'Settings': 'Configurações',
  'Preferences': 'Preferências',
  'Options': 'Opções',
  'Parameters': 'Parâmetros',
  'Arguments': 'Argumentos',
  'Variables': 'Variáveis',
  'Constants': 'Constantes',
  'Properties': 'Propriedades',
  'Attributes': 'Atributos',
  'Features': 'Recursos',
  'Capabilities': 'Capacidades',
  'Functions': 'Funções',
  'Methods': 'Métodos',
  'Commands': 'Comandos',
  'Operations': 'Operações',
  'Procedures': 'Procedimentos',
  'Processes': 'Processos',
  'Tasks': 'Tarefas',
  'Jobs': 'Trabalhos',
  'Services': 'Serviços',
  'Resources': 'Recursos',
  'Components': 'Componentes',
  'Modules': 'Módulos',
  'Plugins': 'Plugins',
  'Extensions': 'Extensões',
  'Add-ons': 'Complementos',
  'Packages': 'Pacotes',
  'Libraries': 'Bibliotecas',
  'Frameworks': 'Frameworks',
  'Platforms': 'Plataformas',
  'Systems': 'Sistemas',
  'Applications': 'Aplicações',
  'Programs': 'Programas',
  'Software': 'Software',
  'Hardware': 'Hardware',
  'Firmware': 'Firmware',
  'Driver': 'Driver',
  'Drivers': 'Drivers',
  'Device': 'Dispositivo',
  'Devices': 'Dispositivos',
  'Equipment': 'Equipamento',
  'Tool': 'Ferramenta',
  'Tools': 'Ferramentas',
  'Utility': 'Utilitário',
  'Utilities': 'Utilitários',
  'Helper': 'Auxiliar',
  'Helpers': 'Auxiliares',
  'Assistant': 'Assistente',
  'Assistants': 'Assistentes',
  'Agent': 'Agente',
  'Agents': 'Agentes',
  'Client': 'Cliente',
  'Clients': 'Clientes',
  'Server': 'Servidor',
  'Servers': 'Servidores',
  'Host': 'Host',
  'Hosts': 'Hosts',
  'Node': 'Nó',
  'Nodes': 'Nós',
  'Network': 'Rede',
  'Networks': 'Redes',
  'Connection': 'Conexão',
  'Connections': 'Conexões',
  'Link': 'Link',
  'Links': 'Links',
  'Route': 'Rota',
  'Routes': 'Rotas',
  'Path': 'Caminho',
  'Paths': 'Caminhos',
  'Channel': 'Canal',
  'Channels': 'Canais',
  'Port': 'Porta',
  'Ports': 'Portas',
  'Interface': 'Interface',
  'Interfaces': 'Interfaces',
  'Protocol': 'Protocolo',
  'Protocols': 'Protocolos',
  'Service': 'Serviço',
  'Services': 'Serviços',
  'API': 'API',
  'APIs': 'APIs',
  'Endpoint': 'Endpoint',
  'Endpoints': 'Endpoints',
  'Method': 'Método',
  'Methods': 'Métodos',
  'Request': 'Solicitação',
  'Requests': 'Solicitações',
  'Response': 'Resposta',
  'Responses': 'Respostas',
  'Message': 'Mensagem',
  'Messages': 'Mensagens',
  'Event': 'Evento',
  'Events': 'Eventos',
  'Signal': 'Sinal',
  'Signals': 'Sinais',
  'Notification': 'Notificação',
  'Notifications': 'Notificações',
  'Alert': 'Alerta',
  'Alerts': 'Alertas',
  'Warning': 'Aviso',
  'Warnings': 'Avisos',
  'Error': 'Erro',
  'Errors': 'Erros',
  'Exception': 'Exceção',
  'Exceptions': 'Exceções',
  'Fault': 'Falha',
  'Faults': 'Falhas',
  'Issue': 'Problema',
  'Issues': 'Problemas',
  'Problem': 'Problema',
  'Problems': 'Problemas',
  'Bug': 'Bug',
  'Bugs': 'Bugs',
  'Fix': 'Correção',
  'Fixes': 'Correções',
  'Solution': 'Solução',
  'Solutions': 'Soluções',
  'Resolution': 'Resolução',
  'Resolutions': 'Resoluções',
  'Workaround': 'Solução alternativa',
  'Workarounds': 'Soluções alternativas',
  'Improvement': 'Melhoria',
  'Improvements': 'Melhorias',
  'Enhancement': 'Aprimoramento',
  'Enhancements': 'Aprimoramentos',
  'Feature': 'Recurso',
  'Features': 'Recursos',
  'Function': 'Função',
  'Functions': 'Funções',
  'Capability': 'Capacidade',
  'Capabilities': 'Capacidades',
  'Ability': 'Habilidade',
  'Abilities': 'Habilidades',
  'Skill': 'Habilidade',
  'Skills': 'Habilidades',
  'Knowledge': 'Conhecimento',
  'Information': 'Informação',
  'Data': 'Dados',
  'Content': 'Conteúdo',
  'Text': 'Texto',
  'String': 'String',
  'Number': 'Número',
  'Integer': 'Inteiro',
  'Float': 'Ponto flutuante',
  'Boolean': 'Booleano',
  'Array': 'Array',
  'Object': 'Objeto',
  'List': 'Lista',
  'Map': 'Mapa',
  'Set': 'Conjunto',
  'Collection': 'Coleção',
  'Group': 'Grupo',
  'Category': 'Categoria',
  'Class': 'Classe',
  'Type': 'Tipo',
  'Kind': 'Tipo',
  'Sort': 'Classificar',
  'Order': 'Ordem',
  'Sequence': 'Sequência',
  'Series': 'Série',
  'Chain': 'Cadeia',
  'Queue': 'Fila',
  'Stack': 'Pilha',
  'Buffer': 'Buffer',
  'Cache': 'Cache',
  'Memory': 'Memória',
  'Storage': 'Armazenamento',
  'Database': 'Banco de dados',
  'Repository': 'Repositório',
  'Archive': 'Arquivo',
  'History': 'Histórico',
  'Log': 'Log',
  'Record': 'Registro',
  'Entry': 'Entrada',
  'Item': 'Item',
  'Element': 'Elemento',
  'Component': 'Componente',
  'Part': 'Parte',
  'Piece': 'Peça',
  'Fragment': 'Fragmento',
  'Section': 'Seção',
  'Chapter': 'Capítulo',
  'Page': 'Página',
  'Document': 'Documento',
  'File': 'Arquivo',
  'Folder': 'Pasta',
  'Directory': 'Diretório',
  'Path': 'Caminho',
  'Location': 'Localização',
  'Position': 'Posição',
  'Place': 'Local',
  'Area': 'Área',
  'Region': 'Região',
  'Zone': 'Zona',
  'Territory': 'Território',
  'Domain': 'Domínio',
  'Realm': 'Reino',
  'Scope': 'Escopo',
  'Range': 'Intervalo',
  'Span': 'Extensão',
  'Extent': 'Extensão',
  'Boundary': 'Limite',
  'Limit': 'Limite',
  'Threshold': 'Limite',
  'Margin': 'Margem',
  'Border': 'Borda',
  'Edge': 'Borda',
  'Corner': 'Canto',
  'Side': 'Lado',
  'Top': 'Topo',
  'Bottom': 'Inferior',
  'Left': 'Esquerda',
  'Right': 'Direita',
  'Center': 'Centro',
  'Middle': 'Meio',
  'Front': 'Frente',
  'Back': 'Atrás',
  'Inside': 'Dentro',
  'Outside': 'Fora',
  'Above': 'Acima',
  'Below': 'Abaixo',
  'Before': 'Antes',
  'After': 'Depois',
  'During': 'Durante',
  'While': 'Enquanto',
  'When': 'Quando',
  'Where': 'Onde',
  'How': 'Como',
  'Why': 'Por que',
  'What': 'O que',
  'Which': 'Qual',
  'Who': 'Quem',
  'Whom': 'Quem',
  'Whose': 'De quem',

  // MQTT related
  'MQTT base topic for Zigbee2MQTT MQTT messages': 'Tópico base MQTT para mensagens MQTT do Zigbee2MQTT',
  'MQTT server URL (use mqtts:// for SSL/TLS connection)': 'URL do servidor MQTT (use mqtts:// para conexão SSL/TLS)',
  'MQTT keepalive in second': 'MQTT keepalive em segundos',
  'MQTT server authentication user': 'Usuário de autenticação do servidor MQTT',
  'MQTT server authentication password': 'Senha de autenticação do servidor MQTT',
  'MQTT client ID': 'ID do cliente MQTT',
  'Include device information to mqtt messages': 'Incluir informações do dispositivo nas mensagens MQTT',
  'MQTT protocol version': 'Versão do protocolo MQTT',

  // SSL/TLS related
  'Absolute path to SSL/TLS certificate of CA used to sign server and client certificates': 'Caminho absoluto para o certificado SSL/TLS da CA usado para assinar certificados do servidor e cliente',
  'Absolute path to SSL/TLS key for client-authentication': 'Caminho absoluto para a chave SSL/TLS para autenticação do cliente',
  'Absolute path to SSL/TLS certificate for client-authentication': 'Caminho absoluto para o certificado SSL/TLS para autenticação do cliente',

  // Device and network related
  'Options for passive devices (mostly battery powered)': 'Opções para dispositivos passivos (principalmente alimentados por bateria)',
  'Block devices from the network (by ieeeAddr)': 'Bloquear dispositivos da rede (por ieeeAddr)',
  'RTS / CTS Hardware Flow Control for serial port': 'Controle de fluxo de hardware RTS / CTS para porta serial',
  'Adapter type, not needed unless you are experiencing problems': 'Tipo de adaptador, não necessário a menos que você esteja enfrentando problemas',
  'QoS level for MQTT messages of this device': 'Nível QoS para mensagens MQTT deste dispositivo',
  'Debounces messages of this device': 'Debounce de mensagens deste dispositivo',
  'Protects unique payload values of specified payload properties from overriding within debounce time': 'Protege valores únicos de payload de propriedades específicas contra sobrescrita dentro do tempo de debounce',
  'Publish optimistic state after set': 'Publicar estado otimista após definir',
  'Name of the device in Home Assistant': 'Nome do dispositivo no Home Assistant',
  'QoS level for MQTT messages of this group': 'Nível QoS para mensagens MQTT deste grupo',

  // Settings descriptions that need translation but preserve product names
  'Home Assistant integration (MQTT discovery)': 'Integração com Home Assistant (descoberta MQTT)',

  // Technical terms that are often left as product names but need context
  'Location of the adapter. To autodetect the port, set null': 'Localização do adaptador. Para detectar automaticamente a porta, defina como null',
  'Baud rate speed for the serial port. This must match what the firmware on your adapter supports (most commonly 115200).': 'Velocidade da taxa de transmissão para a porta serial. Deve corresponder ao que o firmware do seu adaptador suporta (mais comumente 115200).',
  'Allow only certain devices to join the network (by ieeeAddr). Note that all devices not on the passlist will be removed from the network!': 'Permitir apenas determinados dispositivos se juntarem à rede (por ieeeAddr). Observe que todos os dispositivos que não estão na lista de permitidos serão removidos da rede!',
  'Home Assistant legacy actions sensor, when enabled a action sensor will be discoverd and an empty `action` will be send after every published action.': 'Sensor de ações legadas do Home Assistant, quando habilitado um sensor de ação será descoberto e uma `ação` vazia será enviada após cada ação publicada.',
  'Home Assistant experimental event entities, when enabled Zigbee2MQTT will add event entities for exposed actions. The events and attributes are currently deemed experimental and subject to change.': 'Entidades de eventos experimentais do Home Assistant, quando habilitado o Zigbee2MQTT adicionará entidades de eventos para ações expostas. Os eventos e atributos são atualmente considerados experimentais e sujeitos a alterações.',
  'Enable timeout backoff on failed availability pings (x1.5, x3, x6, x12...)': 'Habilitar backoff de timeout em pings de disponibilidade falhados (x1.5, x3, x6, x12...)',
  'Pause availability pings when backoff reaches over this limit until a new Zigbee message is received from the device. A value of zero disables pausing.': 'Pausar pings de disponibilidade quando o backoff exceder este limite até que uma nova mensagem Zigbee seja recebida do dispositivo. Um valor de zero desabilita a pausa.',
  "Disable retain for all send messages. ONLY enable if your MQTT broker doesn't support retained message (e.g. AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Enabling will break the Home Assistant integration": "Desabilitar retain para todas as mensagens enviadas. Habilite APENAS se seu broker MQTT não suportar mensagens retidas (ex: AWS IoT core, Azure IoT Hub, Google Cloud IoT core, IBM Watson IoT Platform). Habilitar quebrará a integração com Home Assistant",
  'Specifies the maximum allowed packet length (in bytes) that the server can send to Zigbee2MQTT. NOTE: The same value exists in your MQTT broker but for the length the client can send to it instead.': 'Especifica o comprimento máximo permitido do pacote (em bytes) que o servidor pode enviar para o Zigbee2MQTT. NOTA: O mesmo valor existe no seu broker MQTT, mas para o comprimento que o cliente pode enviar para ele.',
  'Sets the MQTT Message Expiry in seconds, Make sure to set mqtt.version to 5': 'Define a expiração da mensagem MQTT em segundos, certifique-se de definir mqtt.version como 5',
  'The minimum time between payloads in seconds. Payloads received whilst the device is being throttled will be discarded': 'O tempo mínimo entre payloads em segundos. Payloads recebidos enquanto o dispositivo está sendo limitado serão descartados',
  'Filter attributes with regex from published payload.': 'Filtrar atributos com regex do payload publicado.',
  "Filter attributes with regex from being added to the cache, this prevents the attribute from being in the published payload when the value didn't change.": "Filtrar atributos com regex de serem adicionados ao cache, isso impede que o atributo esteja no payload publicado quando o valor não mudou.",
  'Filter attributes with regex from optimistic publish payload when calling /set. (This has no effect if optimistic is set to false).': 'Filtrar atributos com regex do payload de publicação otimista ao chamar /set. (Isso não tem efeito se otimista estiver definido como falso).',
  'The user-defined device icon for the frontend. It can be a full URL link to an image (e.g. https://SOME.SITE/MODEL123.jpg) or a path to a local file inside the `device_icons` directory (e.g. device_icons/MODEL123.png).': 'O ícone do dispositivo definido pelo usuário para o frontend. Pode ser um link URL completo para uma imagem (ex: https://SOME.SITE/MODEL123.jpg) ou um caminho para um arquivo local dentro do diretório `device_icons` (ex: device_icons/MODEL123.png).',
  "Control when to publish state OFF or CLOSE for a group. 'all_members_off': only publish state OFF/CLOSE when all group members are in state OFF/CLOSE,  'last_member_state': publish state OFF whenever one of its members changes to OFF": "Controlar quando publicar estado OFF ou CLOSE para um grupo. 'all_members_off': publicar estado OFF/CLOSE apenas quando todos os membros do grupo estão em estado OFF/CLOSE, 'last_member_state': publicar estado OFF sempre que um de seus membros muda para OFF"
};

function shouldSkipTranslation(text) {
  if (!text || typeof text !== 'string') return true;
  return PRODUCT_NAMES.some(productName => text.includes(productName));
}

function translateText(text) {
  if (shouldSkipTranslation(text)) return text;
  return PORTUGUESE_TRANSLATIONS[text] || text;
}

// Filter untranslated entries for Portuguese Brazilian
const ptbrEntries = untranslated.filter(entry => entry.file === 'ptbr.json');

if (ptbrEntries.length === 0) {
  console.log('No untranslated entries found for Portuguese Brazilian (ptbr.json)');
  process.exit(0);
}

console.log(`Found ${ptbrEntries.length} untranslated entries for Portuguese Brazilian`);

// Load Portuguese Brazilian locale file
const ptbrPath = './src/i18n/locales/ptbr.json';
const ptbrLocale = JSON.parse(readFileSync(ptbrPath, 'utf8'));

let translatedCount = 0;

// Apply translations
for (const entry of ptbrEntries) {
  const translation = translateText(entry.value);
  if (translation !== entry.value) {
    set(ptbrLocale, entry.path, translation);
    translatedCount++;
    console.log(`Translated: ${entry.path} = "${translation}"`);
  }
}

// Write back to file
writeFileSync(ptbrPath, JSON.stringify(ptbrLocale, null, 2) + '\n');

console.log(`Successfully translated ${translatedCount} entries for Portuguese Brazilian`);
console.log(`Portuguese Brazilian translation file updated: ${ptbrPath}`);